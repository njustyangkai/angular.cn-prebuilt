<!DOCTYPE html><html lang="en" ng-app="angularIOApp" itemscope itemtype="http://schema.org/Framework"><!-- template: public/docs/_layout--><head><title>Webpack 简介 - ts - GUIDE</title><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta name="keywords" content="Angular, 中文, 中文版, AngularJS, AngularDart, Javscript, Dart, Framework, JavaScript MVC, Google"/><meta name="robots" content="all"/><meta name="referrer" content="origin"/><meta name="viewport" id="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Angular"/><meta property="og:image" content="/resources/images/logos/standard/shield-large.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="184"/><meta property="og:image:height" content="200"/><meta property="og:description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta itemprop="name" content="Angular"/><meta itemprop="description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta itemprop="image" content="/resources/images/logos/standard/shield-large.png"/><link rel="icon" type="image/x-icon" href="/resources/images/icons/favicon.ico"/><link rel="stylesheet" href="/resources/css/vendor/angular-material.min.css"/><link href="/resources/fonts/vendor/roboto.css" rel="stylesheet" type="text/css"/><link href="/resources/fonts/vendor/material-icons.css" rel="stylesheet"/><link rel="stylesheet" href="/resources/css/vendor/icomoon/style.css"/><link rel="stylesheet" href="/resources/css/vendor/animate.css"/><link rel="stylesheet" href="/resources/css/main.css"/><!-- MOBILE ICONS -->
<link rel="apple-touch-icon" sizes="57x57" href="/resources/images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/resources/images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/resources/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/resources/images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/resources/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/resources/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/resources/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/resources/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/resources/images/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/resources/images/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/resources/images/favicons/manifest.json"></head><body ng-controller="AppCtrl as appCtrl" class="l-offset-nav l-offset-side-nav"><nav data-swiftype-index="false" scroll-y-offset-element="scroll-y-offset-element" class="main-nav l-pinned-top l-layer-5"><h1><a href="/" md-button>Angular <sup>by Google</sup></a></h1><button aria-label="查看菜单" ng-click="appCtrl.toggleMainMenu($event)" md-button="md-button" class="main-nav-button main-nav-mobile-trigger l-right">网站菜单 <span class="icon icon-arrow-drop-down"></span></button><ul ng-class="appCtrl.showMainNav ? 'is-visible' : ''"><li class="l-left"><a class="main-nav-button" href="/features.html" md-button>特性</a></li><li class="l-left"><a class="main-nav-button" href="/docs/ts/latest/" md-button>文档</a></li><li class="l-left"><a class="main-nav-button" href="/events.html" md-button>会议</a></li><li class="l-left"><a href="http://community.angular.cn/" target="_blank" md-button="md-button" class="main-nav-button">社区</a></li><li class="l-left"><a class="main-nav-button" href="/translate/cn/home.html" md-button>关于中文版</a></li><li class="l-right"><a class="main-nav-button" href="/docs/ts/latest/quickstart.html" md-button>立即开始！</a></li><li class="l-right"><a ng-click="appCtrl.toggleSource($event)" href="href" class="main-nav-button md-button ng-cloak"><span>{{appCtrl.sourceVisible?'Hide English':'Show English'}}</span></a></li></ul></nav><!-- Include this file ONLY when current.path[2] is defined--><nav data-swiftype-index="false" ng-class="appCtrl.showDocsNav ? 'is-visible' : ''" class="sidenav l-pinned-left l-layer-4 l-offset-nav"><!-- SEARCH BAR--><header class="sidenav-search st-input-wrapper"><div class="st-input-inner"><label for="search-io" class="is-hidden">搜索文档</label><input type="text" placeholder="搜索文档..." class="st-default-search-input"/></div><button aria-label="View Docs Menu" ng-click="appCtrl.toggleDocsMenu($event)" md-button="md-button" class="mobile-trigger button">文档 <span class="icon icon-arrow-drop-down"></span></button></header><ul class="sidenav-links"><li class="sidenav-section no-border"><a href="/docs/ts/latest/" class="nav-title">文档首页</a></li><!-- CORE DOCUMENTATION--><li class="sidenav-section-divider"><h3>核心文档</h3></li><li class="sidenav-section"><a href="/docs/ts/latest/quickstart.html" title="快速起步" class="nav-title ">快速起步</a></li><li class="sidenav-section"><a href="/docs/ts/latest/cli-quickstart.html" title="使用 CLI 快速构建 Angular 应用" class="nav-title ">CLI 快速起步</a></li><li class="sidenav-section"><a href="/docs/ts/latest/guide/" title="如何阅读本文档" class="nav-title is-parent ">开发指南<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-ordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/guide/" title="如何阅读本文档">1. 概览</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/setup.html" title="安装 Angular 《快速起步》种子，更快更有效地在本地开发应用">2. 开发环境</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/learning-angular.html" title="Angular 初学者的推荐学习路径">3. 学习 Angular</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/architecture.html" title="Angular 应用的基本构造块">4. 架构</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/appmodule.html" title="如何在根 &quot;AppModule&quot; 中构建和启动应用。">5. 根模块</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/displaying-data.html" title="属性绑定机制把数据显示到用户界面上。">6. 显示数据</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/user-input.html" title="用户输入触发 DOM 事件。我们通过事件绑定来监听它们，把更新过的数据导入回我们的组件和 model。">7. 用户输入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/forms.html" title="表单创建一个有机、有效、引人注目的数据输入体验。Angular 表单协调一组数据绑定控件，跟踪变更，验证输入的有效性，并且显示错误信息。">8. 表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/dependency-injection.html" title="Angular 的依赖注入系统能够即时地创建和交付所依赖的服务。">9. 依赖注入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/template-syntax.html" title="学习如何写模板来显示数据，以及在数据绑定的帮助下响应用户事件。">10. 模板语法</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/cheatsheet.html" title="速查表">11. 速查表</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/style-guide.html" title="如何写 Angular 风格的程序">12. 风格指南</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/glossary.html" title="Angular 中最重要的词汇的简要定义">13. 词汇表</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/change-log.html" title="最新文档更新历史记录。">14. 更新记录</a></li></ul></div></li><li class="sidenav-section no-border"><a href="/docs/ts/latest/api/" title="API 参考手册" class="nav-title ">API参考手册</a></li><!-- ADVANCED DOCUMENATION--><li class="sidenav-section-divider"><h3>附加文档</h3></li><li class="sidenav-section"><a href="/docs/ts/latest/tutorial/" title="英雄指南教程带我们一步步使用 TypeScript 创建 Angular 应用。" class="nav-title is-parent ">教程<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-ordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/" title="英雄指南教程带我们一步步使用 TypeScript 创建 Angular 应用。">1. 简介</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt1.html" title="构建一个简单的英雄编辑器">2. 英雄编辑器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt2.html" title="构建一个主从结构的页面，用于展现英雄列表">3. 主从结构</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt3.html" title="把主从结构的页面重构成多个组件">4. 多个组件</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt4.html" title="创建一个可复用的服务来调用英雄的数据">5. 服务</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt5.html" title="添加 Angular 组件路由，并且学习在视图之间导航">6. 路由</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt6.html" title="把服务和组件改为用 Angular 的 HTTP 服务实现">7. HTTP</a></li></ul></div></li><li class="sidenav-section"><a href="/docs/ts/latest/guide/animations.html" title="Angular 动画系统指南。" class="nav-title is-parent is-selected">高级文档<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-unordered-lists"><ul><li class="nav-list-item "><a href="/docs/ts/latest/guide/animations.html" title="Angular 动画系统指南。" class="translated-cn">动画</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/attribute-directives.html" title="属性型指令把行为添加到现有元素上。" class="translated-cn">属性型指令</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/browser-support.html" title="浏览器支持与填充 (Polyfill) 指南" class="translated-cn">浏览器支持</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/component-styles.html" title="学习如何给组件应用 CSS 样式。" class="translated-cn">组件样式</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/deployment.html" title="如何部署Angular应用。" class="translated-cn">部署</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/hierarchical-dependency-injection.html" title="Angular 的多级依赖注入系统支持与组件树并行的嵌套式注入器。" class="translated-cn">多级注入器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/reactive-forms.html" title="使用FormBuilder、组合数组创建响应式表单。" class="translated-cn">响应式表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/server-communication.html" title="通过 HTTP 客户端与远程服务器对话。" class="translated-cn">HTTP 客户端</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/lifecycle-hooks.html" title="Angular 调用指令和组件的生命周期钩子函数，包括它的创建、变更和销毁时。" class="translated-cn">生命周期钩子</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/ngmodule.html" title="用 @NgModule 定义应用中的模块" class="translated-cn">Angular模块 (NgModule)</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/npm-packages.html" title="推荐的 npm 包以及如何指定所依赖的包" class="translated-cn">npm 包</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/pipes.html" title="管道可以在模板中转换显示的内容。" class="translated-cn">管道</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/router.html" title="揭示如何通过 Angular 路由进行基本的屏幕导航。" class="translated-cn">路由与导航</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/security.html" title="开发内容安全的 Angular 应用。" class="translated-cn">安全</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/setup-systemjs-anatomy.html" title="解析 SystemJS 本地开发环境" class="translated-cn">搭建剖析</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/structural-directives.html" title="Angular 有一个强力的模板引擎，它能让你轻松维护元素的DOM树结构。" class="translated-cn">结构型指令</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/testing.html" title="Angular 应用的测试技术与实践。" class="translated-cn">测试</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/typescript-configuration.html" title="Angular 开发者的 TypeScript 配置" class="translated-cn">TypeScript 配置</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/upgrade.html" title="AngularJS 应用可以逐步升级到 Angular。" class="translated-cn">从 AngularJS 升级</a></li><li class="nav-list-item is-selected"><a href="/docs/ts/latest/guide/webpack.html" title="使用基于 Webpack 的工具创建 Angular 应用" class="translated-cn">Webpack 简介</a></li></ul></div></li><li class="sidenav-section"><a href="/docs/ts/latest/cookbook/" title="一组常见 Angular 应用场景的“烹饪宝典”" class="nav-title is-parent ">烹饪宝典<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-unordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/" title="一组常见 Angular 应用场景的“烹饪宝典”" class="translated-cn">概览</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/aot-compiler.html" title="学习如何使用预编译器" class="translated-cn">预 (AoT) 编译器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ajs-quick-reference.html" title="学习如何把 AngularJS 中的概念和技术对应到 Angular 中" class="translated-cn">从 AngularJS 到 Angular</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/component-communication.html" title="在不同的指令和组件之间共享信息" class="translated-cn">组件通讯</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/component-relative-paths.html" title="为组件的模板和样式指定相对于组件的路径" class="translated-cn">相对于组件的路径</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dependency-injection.html" title="依赖注入技术" class="translated-cn">依赖注入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dynamic-component-loader.html" title="如何动态加载组件" class="translated-cn">动态组件加载器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dynamic-form.html" title="用 FormGroup 渲染动态表单" class="translated-cn">动态表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/form-validation.html" title="验证用户在表单中的输入" class="translated-cn">表单验证</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/i18n.html" title="把应用的模板文本翻译成多种语言。" class="translated-cn">国际化 (i18n)</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ngmodule-faq.html" title="对 @NgModule 常见问题的解答" class="translated-cn">Angular 模块常见问题</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/set-document-title.html" title="使用 Title 服务来设置文档标题或窗口标题" class="translated-cn">设置文档标题</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ts-to-js.html" title="把 Angular 的 TypeScript 范例转换为 ES6 和 ES5 JavaScript." class="translated-cn">从 TypeScript 到 JavaScript</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/visual-studio-2015.html" title="使用 Visual Studio 2015 快速起步" class="translated-cn">Visual Studio 2015 快速起步</a></li></ul></div></li></ul><nav class="dropdown"><button aria-label="选择Angular版本" md-button="md-button" ng-click="appCtrl.toggleVersionMenu($event)" class="dropdown-button">Angular for TypeScript  <span class="icon icon-arrow-drop-down"></span></button><div ng-click="appCtrl.toggleVersionMenu($event)" ng-show="appCtrl.showMenu" class="overlay ng-hide"></div><ul ng-class="appCtrl.showMenu ? 'is-visible' : ''" class="dropdown-menu"><li><a href="/docs/ts/latest/guide/webpack.html" md-button>Angular for TypeScript </a></li><li><a href="/docs/js/latest/guide/webpack.html" md-button>Angular for JavaScript </a></li><li><a href="/docs/dart/latest/guide/webpack.html" md-button>Angular for Dart </a></li></ul></nav></nav><script>// Could put in appCtrl but only needed here and clear here
(function scrollToSelectedLink() {
  var sideNav = document.getElementsByClassName('sidenav')[0];
  var link = sideNav.getElementsByClassName('is-selected')[0];
  if (link && link.offsetTop > window.innerHeight) {
    sideNav.scrollTop = link.offsetTop - (window.innerHeight / 2);
    //alert("offsetTop: " + link.offsetTop + " side-nav top is " + sideNav.scrollTop);
  }
})()</script><header class="hero background-sky"><h1 class="hero-title ">Webpack 简介 </h1><div class="clear"></div></header><div class="banner"><p class="text-body translated-cn">使用基于 Webpack 的工具创建 Angular 应用</p></div><article class="l-content-small grid-fluid docs-content"><script>function why(id, backTo) {
  var id = "#"+id;
  var el = document.querySelector(id);
  el.hidden=el.hidden=!el.hidden;

  if (el.hidden && backTo){
    // the next line is required to work around a bug in WebKit (Chrome / Safari)
    location.href = "#";
    location.href =  "#" + backTo;
  }
}</script><script>function verbose(isVerbose) {
  isVerbose = !! isVerbose;
  var el = document.querySelector('button.verbose.off');
  el.style.display = isVerbose ? 'block' : 'none';
  var el = document.querySelector('button.verbose.on');
  el.style.display = isVerbose ? 'none' : 'block';

  CCSStylesheetRuleStyle('main','.l-verbose-section', 'display',
    isVerbose ? 'block' : 'none');
}
</script><script>function CCSStylesheetRuleStyle(stylesheet, selectorText, style, value){
  /* returns the value of the element style of the rule in the stylesheet
  *  If no value is given, reads the value
  *  If value is given, the value is changed and returned
  *  If '' (empty string) is given, erases the value.
  *  The browser will apply the default one
  *
  * string stylesheet: part of the .css name to be recognized, e.g. 'default'
  * string selectorText: css selector, e.g. '#myId', '.myClass', 'thead td'
  * string style: camelCase element style, e.g. 'fontSize'
  * string value optional : the new value
  */
  var CCSstyle = undefined, rules, sheet;
  for(var m in document.styleSheets){
    sheet = document.styleSheets[m];
    if(sheet.href && sheet.href.indexOf(stylesheet) != -1){
    rules = sheet[document.all ? 'rules' : 'cssRules'];
    for(var n in rules){
      console.log(rules[n].selectorText);
      if(rules[n].selectorText == selectorText){
        CCSstyle = rules[n].style;
        break;
      }
    }
    break;
    }
  }
  if(value == undefined)
    return CCSstyle[style]
  else
    return CCSstyle[style] = value
}
</script><!-- The docs standard h4 style uppercases, making code terms unreadable. Override it.--><style>h4 {font-size: 17px !important; text-transform: none !important;}
.syntax { font-family: Consolas, 'Lucida Sans', Courier, sans-serif; color: black; font-size: 85%; }
</style><p><a href="https://webpack.github.io/"><strong>Webpack</strong></a> is a popular module bundler,
a tool for bundling application source code in convenient <em>chunks</em>
and for loading that code from a server into a browser.</p>
<p><a href="https://webpack.github.io/"><strong>Webpack</strong></a>是一个广受欢迎的模块打包器，
这个工具用来把程序源码打包到一些方便易用的<em>块</em>中，以便把这些代码从服务器加载到浏览器中。</p>
<p>It&#39;s an excellent alternative to the <em>SystemJS</em> approach used elsewhere in the documentation.
This guide offers a taste of Webpack and explains how to use it with Angular applications.</p>
<p>它是我们在文档中到处使用的<em>SystemJS</em>的一个优秀替代品。这篇指南会带我们尝尝Webpack的滋味，并解释如何在Angular程序中使用它。</p>
<a id="top"></a><h1 id="contents">Contents</h1>
<h1 id="-">目录</h1>
<ul>
<li><p><a href="#what-is-webpack">What is Webpack?</a></p>
<p><a href="#what-is-webpack">什么是Webpack？</a></p>
<ul>
<li><p><a href="#entries-outputs">Entries and outputs</a></p>
<p><a href="#entries-outputs">入口与输出</a></p>
</li>
<li><p><a href="#multiple-bundles">Multiple bundles</a></p>
<p><a href="#multiple-bundles">多重包</a></p>
</li>
<li><p><a href="#loaders">Loaders</a></p>
<p><a href="#loaders">加载器</a></p>
</li>
<li><p><a href="#plugins">Plugins</a></p>
<p><a href="#plugins">插件</a></p>
</li>
</ul>
</li>
<li><p><a href="#configure-webpack">Configuring Webpack</a></p>
<p><a href="#configure-webpack">配置Webpack</a></p>
<ul>
<li><p><a href="#polyfills">Polyfills</a></p>
</li>
<li><p><a href="#common-configuration">Common configuration</a></p>
<p><a href="#common-configuration">公共配置</a></p>
</li>
<li><p><a href="#inside-webpack-commonjs">Inside <code>webpack.common.js</code></a></p>
<p><a href="#inside-webpack-commonjs">深入<code>webpack.common.js</code></a></p>
<ul>
<li><p><a href="#common-entries">entry</a></p>
<p><a href="#common-entries">入口</a></p>
</li>
<li><p><a href="#common-resolves">resolve extension-less imports</a></p>
<p><a href="#common-resolves">解析无扩展名的导入</a></p>
</li>
<li><p><a href="#common-rules"><code>module.rules</code></a></p>
</li>
<li><p><a href="#plugins">Plugins</a></p>
<p><a href="#plugins">插件</a></p>
</li>
<li><p><a href="#commons-chunk-plugin"><code>CommonsChunkPlugin</code></a></p>
</li>
<li><p><a href="#html-webpack-plugin"><code>HtmlWebpackPlugin</code></a></p>
</li>
</ul>
</li>
<li><p><a href="#environment-configuration">Environment specific configuration</a></p>
<p><a href="#environment-configuration">针对特定环境进行配置</a></p>
</li>
<li><p><a href="#development-configuration">Development configuration</a></p>
<p><a href="#development-configuration">开发环境配置</a></p>
</li>
<li><p><a href="#production-configuration">Production configuration</a></p>
<p><a href="#production-configuration">生产环境配置</a></p>
</li>
<li><p><a href="#test-configuration">Test configuration</a></p>
<p><a href="#test-configuration">测试环境配置</a></p>
</li>
</ul>
</li>
<li><p><a href="#try">Trying it out</a></p>
<p><a href="#try">试一下</a></p>
</li>
<li><p><a href="#highlights">Highlights</a></p>
<p><a href="#highlights">重点</a></p>
</li>
<li><p><a href="#conclusion">Conclusion</a></p>
<p><a href="#conclusion">总结</a></p>
</li>
</ul>
<p>You can also <a href="/resources/zips/webpack/webpack.zip">download the final result.</a></p>
<p>你还可以<a href="/resources/zips/webpack/webpack.zip">点这里下载最终结果</a>。</p>
<div class="l-main-section"></div><a id="what-is-webpack"></a><h2 id="what-is-webpack-">What is Webpack?</h2>
<h2 id="-webpack-">什么是Webpack？</h2>
<p>Webpack is a powerful module bundler. 
A <em>bundle</em> is a JavaScript file that incorporates <em>assets</em> that <em>belong</em> together and 
should be served to the client in a response to a single file request.
A bundle can include JavaScript, CSS styles, HTML, and almost any other kind of file.</p>
<p>Webpack是一个强力的模块打包器。
所谓<em>包(bundle)</em>就是一个JavaScript文件，它把一堆<em>资源(assets)</em>合并在一起，以便它们可以在同一个文件请求中发回给客户端。
包中可以包含JavaScript、CSS样式、HTML以及很多其它类型的文件。</p>
<p>Webpack roams over your application source code,
looking for <code>import</code> statements, building a dependency graph, and emitting one or more <em>bundles</em>.
With plugins and rules, Webpack can preprocess and minify different non-JavaScript files such as TypeScript, SASS, and LESS files.</p>
<p>Webpack会遍历你应用中的所有源码，查找<code>import</code>语句，构建出依赖图谱，并产出一个(或多个)<em>包</em>。
通过插件和规则，Webpack可以对各种非JavaScript文件进行预处理和最小化(Minify)，比如TypeScript、SASS和LESS文件等。</p>
<p>You determine what Webpack does and how it does it with a JavaScript configuration file, <code>webpack.config.js</code>.</p>
<p>我们通过一个JavaScript配置文件<code>webpack.config.js</code>来决定Webpack做什么以及如何做。</p>
<a id="entries-outputs"></a><div class="l-main-section"></div><h3 id="entries-and-outputs">Entries and outputs</h3>
<h3 id="-">入口与输出</h3>
<p>You supply Webpack with one or more <em>entry</em> files and let it find and incorporate the dependencies that radiate from those entries. 
The one entry point file in this example is the application&#39;s root file, <code>src/main.ts</code>:</p>
<p>我们给Webpack提供一个或多个<em>入口</em>文件，来让它查找与合并那些从这些入口点发散出去的依赖。
在下面这个例子中，我们的入口点是该应用的根文件<code>src/app.ts</code>：</p>
<div class="code-example"><header><h4>webpack.config.js (single entry)</h4></header><code-example language="js" format="">entry: {
  &#39;app&#39;: &#39;./src/main.ts&#39;
},
</code-example></div><p>Webpack inspects that file and traverses its <code>import</code> dependencies recursively.</p>
<p>Webpack探查那个文件，并且递归遍历它的<code>import</code>依赖。</p>
<div class="code-example"><header><h4>src/main.ts</h4></header><code-example language="ts" format="">import { Component } from &#39;@angular/core&#39;;

@Component({
  selector: &#39;my-app&#39;,
  templateUrl: &#39;./app.component.html&#39;,
  styleUrls: [&#39;./app.component.css&#39;]
})
export class AppComponent { }
</code-example></div><p>It sees that you&#39;re importing <code>@angular/core</code> so it adds that to its dependency list for potential inclusion in the bundle.
It opens the <code>@angular/core</code> file and follows <em>its</em> network of <code>import</code> statements until it has built the complete dependency graph from <code>main.ts</code> down.</p>
<p>这里，Webpack看到我们正在导入<code>@angular/core</code>，于是就这个文件加入到它的依赖列表里，为(有可能)把该文件打进包中做准备。
它打开<code>@angular/core</code>并追踪由<em>该文件的</em><code>import</code>语句构成的网络，直到构建出从<code>main.ts</code>往下的整个依赖图谱。</p>
<p>Then it <strong>outputs</strong> these files to the <code>app.js</code> <em>bundle file</em> designated in configuration:</p>
<p>然后它把这些文件<strong>输出</strong>到当前配置所指定的<em>包文件</em><code>app.js</code>中：</p>
<div class="code-example"><code-example name="webpack.config.js (single output)" language="javascript">output: {
  filename: 'app.js'
}
</code-example></div><p>This <code>app.js</code> output bundle is a single JavaScript file that contains the application source and its dependencies.
You&#39;ll load it later with a <code>&lt;script&gt;</code> tag in the <code>index.html</code>.</p>
<p>这个<code>app.js</code>输出包是个单一的JavaScript文件，它包含程序的源码及其所有依赖。
  后面我们将在<code>index.html</code>中用<code>&lt;script&gt;</code>标签来加载它。</p>
<a id="multiple-bundles"></a><h4 id="multiple-bundles">Multiple bundles</h4>
<h4 id="-">多重包</h4>
<p>You probably don&#39;t want one giant bundle of everything.
It&#39;s preferable to separate the volatile application app code from comparatively stable vendor code modules.</p>
<p>我们可能不会希望把所有东西打进一个巨型包，而更喜欢把多变的应用代码从相对稳定的第三方提供商模块中分离出来。</p>
<p>Change the configuration so that it has two entry points, <code>main.ts</code> and <code>vendor.ts</code>:</p>
<p>所以要修改配置，以获得两个入口点：<code>main.ts</code>和<code>vendor.ts</code>：</p>
<div class="code-example"><code-example language="javascript">entry: {
  app: 'src/app.ts',
  vendor: 'src/vendor.ts'
},

output: {
  filename: '[name].js'
}
</code-example></div><p>Webpack constructs two separate dependency graphs
and emits <em>two</em> bundle files, one called <code>app.js</code> containing only the application code and
another called <code>vendor.js</code> with all the vendor dependencies.</p>
<p>Webpack会构造出两个独立的依赖图谱，并产出<em>两个</em>包文件：一个叫做<code>app.js</code>，它只包含我们的应用代码；另一个叫做<code>vendor.js</code>，它包含所有的提供商依赖。</p>
<div class="l-sub-section"><p>The <code>[name]</code> in the output name is a <em>placeholder</em> that a Webpack plugin replaces with the entry names,
<code>app</code> and <code>vendor</code>. Plugins are <a href="#commons-chunk-plugin">covered later</a> in the guide.</p>
<p>在输出文件名中出现的<code>[name]</code>是一个Webpack的<em>占位符</em>，它将被一个Webpack插件替换为入口点的名字，分别是<code>app</code>和<code>vendor</code>。插件在本章的<a href="#commons-chunk-plugin">稍后部分</a>讲解。</p>
</div><p>To tell Webpack what belongs in the vendor bundle,
add a <code>vendor.ts</code> file that only imports the application&#39;s third-party modules:</p>
<p>要想告诉Webpack哪些文件属于vendor包，可以添加一个<code>vendor.ts</code>文件，它只导入该应用的第三方模块：</p>
<div class="code-example"><header><h4>src/vendor.ts</h4></header><code-example language="ts" format="">// Angular
import &#39;@angular/platform-browser&#39;;
import &#39;@angular/platform-browser-dynamic&#39;;
import &#39;@angular/core&#39;;
import &#39;@angular/common&#39;;
import &#39;@angular/http&#39;;
import &#39;@angular/router&#39;;

// RxJS
import &#39;rxjs&#39;;

// Other vendors for example jQuery, Lodash or Bootstrap
// You can import js, ts, css, sass, ...
</code-example></div><a id="loaders"></a><div class="l-main-section"></div><h3 id="loaders">Loaders</h3>
<h3 id="-loader-">加载器(Loader)</h3>
<p>Webpack can bundle any kind of file: JavaScript, TypeScript, CSS, SASS, LESS, images, HTML, fonts, whatever.
Webpack <em>itself</em> only understands JavaScript files.
Teach it to transform non-JavaScript file into their JavaScript equivalents with <em>loaders</em>.
Configure loaders for TypeScript and CSS as follows.</p>
<p>Webpack可以打包任何类型的文件：JavaScript、TypeScript、CSS、SASS、LESS、图片、HTML以及字体文件等等。
但Webpack<em>本身</em>只认识JavaScript文件。
我们要通过<em>加载器</em>来告诉它如何把这些文件处理成JavaScript文件。
在这里，我们为TypeScript和CSS文件配置了加载器。</p>
<div class="code-example"><code-example language="javascript">rules: [
  {
    test:/\.ts$/,
    loader: 'awesome-typescript-loader'
  },
  {
    test: /\.css$/,loaders: 'style-loader!css-loader'
  }
]
</code-example></div><p>When Webpack encounters <code>import</code> statements like the following, 
it applies the <code>test</code> RegEx patterns. </p>
<p>当Webpack遇到如下所示的<code>import</code>语句时，它就会调用正则表达式的<code>test</code>方法。</p>
<div class="code-example"><code-example language="typescript">import { AppComponent } from './app.component.ts';

import 'uiframework/dist/uiframework.css';
</code-example></div><p>When a pattern matches the filename, Webpack processes the file with the associated loader. </p>
<p>如果一个模式匹配上文件名，Webpack就用它所关联的加载器处理这个文件。</p>
<p>The first <code>import</code> file matches the <code>.ts</code> pattern so Webpack processes it with the <code>awesome-typescript-loader</code>.
The imported file doesn&#39;t match the second pattern so its loader is ignored. </p>
<p>第一个<code>import</code>文件匹配上了<code>.ts</code>模式，于是Webpack就用<code>awesome-typescript-loader</code>加载器处理它。
导入的文件没有匹配上第二个模式，于是它的加载器就被忽略了。</p>
<p>The second <code>import</code> matches the second <code>.css</code> pattern for which you have <em>two</em> loaders chained by the (!) character. 
Webpack applies chained loaders <em>right to left</em> . So it applies 
the <code>css</code> loader first to flatten CSS <code>@import</code> and <code>url(...)</code> statements.
 Then it applies the <code>style</code> loader to append the css inside <code>&lt;style&gt;</code> elements on the page.</p>
<p>第二个<code>import</code>匹配上了第二个<code>.css</code>模式，它有两个用叹号字符(<code>!</code>)串联起来的加载器。
Webpack会<em>从右到左</em>逐个应用串联的加载器，于是它先应用了<code>css</code>加载器(用来平面化CSS的<code>@import</code>和<code>url(...)</code>语句)，
然后应用了<code>style</code>加载器(用来把css追加到页面上的<em>&lt;style&gt;</em>元素中)。</p>
<a id="plugins"></a><div class="l-main-section"></div><h3 id="plugins">Plugins</h3>
<h3 id="-">插件</h3>
<p>Webpack has a build pipeline with well-defined phases.
Tap into that pipeline with plugins such as the <code>uglify</code> minification plugin:</p>
<p>Webpack有一条构建流水线，它被划分成多个经过精心定义的阶段(phase)。
我们可以把插件(比如<code>uglify</code>代码最小化插件)挂到流水线上：</p>
<div class="code-example"><code-example language="javascript">plugins: [
  new webpack.optimize.UglifyJsPlugin()
]
</code-example></div><a id="configure-webpack"></a><div class="l-main-section"></div><h2 id="configuring-webpack">Configuring Webpack</h2>
<h2 id="-webpack">配置Webpack</h2>
<p>After that brief orientation, you are ready to build your own Webpack configuration for Angular apps. </p>
<p>经过简短的培训之后，我们准备为Angular应用构建一份自己的Webpack配置了。</p>
<p>Begin by setting up the development environment.</p>
<p>从设置开发环境开始。</p>
<p>Create a new project folder.</p>
<p>创建一个新的项目文件夹。</p>
<code-example language="sh" class="code-shell">mkdir angular-webpack
cd    angular-webpack
</code-example><p>Add these files :</p>
<p>把下列文件添加到根目录下：</p>
<code-tabs><code-pane language="json" name="package.json" format="linenums">{
  &quot;name&quot;: &quot;angular2-webpack&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;A webpack starter for Angular&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;webpack-dev-server --inline --progress --port 8080&quot;,
    &quot;test&quot;: &quot;karma start&quot;,
    &quot;build&quot;: &quot;rimraf dist &amp;&amp; webpack --config config/webpack.prod.js --progress --profile --bail&quot;
  },
  &quot;license&quot;: &quot;MIT&quot;,
  &quot;dependencies&quot;: {
    &quot;@angular/common&quot;: &quot;~4.0.0&quot;,
    &quot;@angular/compiler&quot;: &quot;~4.0.0&quot;,
    &quot;@angular/core&quot;: &quot;~4.0.0&quot;,
    &quot;@angular/forms&quot;: &quot;~4.0.0&quot;,
    &quot;@angular/http&quot;: &quot;~4.0.0&quot;,
    &quot;@angular/platform-browser&quot;: &quot;~4.0.0&quot;,
    &quot;@angular/platform-browser-dynamic&quot;: &quot;~4.0.0&quot;,
    &quot;@angular/router&quot;: &quot;~4.0.0&quot;,
    &quot;core-js&quot;: &quot;^2.4.1&quot;,
    &quot;rxjs&quot;: &quot;5.0.1&quot;,
    &quot;zone.js&quot;: &quot;^0.8.4&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@types/node&quot;: &quot;^6.0.45&quot;,
    &quot;@types/jasmine&quot;: &quot;2.5.36&quot;,
    &quot;angular2-template-loader&quot;: &quot;^0.6.0&quot;,
    &quot;awesome-typescript-loader&quot;: &quot;^3.0.4&quot;,
    &quot;css-loader&quot;: &quot;^0.26.1&quot;,
    &quot;extract-text-webpack-plugin&quot;: &quot;2.0.0-beta.5&quot;,
    &quot;file-loader&quot;: &quot;^0.9.0&quot;,
    &quot;html-loader&quot;: &quot;^0.4.3&quot;,
    &quot;html-webpack-plugin&quot;: &quot;^2.16.1&quot;,
    &quot;jasmine-core&quot;: &quot;^2.4.1&quot;,
    &quot;karma&quot;: &quot;^1.2.0&quot;,
    &quot;karma-chrome-launcher&quot;: &quot;^2.0.0&quot;,
    &quot;karma-jasmine&quot;: &quot;^1.0.2&quot;,
    &quot;karma-sourcemap-loader&quot;: &quot;^0.3.7&quot;,
    &quot;karma-webpack&quot;: &quot;^2.0.1&quot;,
    &quot;null-loader&quot;: &quot;^0.1.1&quot;,
    &quot;raw-loader&quot;: &quot;^0.5.1&quot;,
    &quot;rimraf&quot;: &quot;^2.5.2&quot;,
    &quot;style-loader&quot;: &quot;^0.13.1&quot;,
    &quot;typescript&quot;: &quot;~2.0.10&quot;,
    &quot;webpack&quot;: &quot;2.2.1&quot;,
    &quot;webpack-dev-server&quot;: &quot;2.4.1&quot;,
    &quot;webpack-merge&quot;: &quot;^3.0.0&quot;
  }
}
</code-pane><code-pane language="json" name="src/tsconfig.json" format="linenums">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;es5&quot;,
    &quot;module&quot;: &quot;commonjs&quot;,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;sourceMap&quot;: true,
    &quot;emitDecoratorMetadata&quot;: true,
    &quot;experimentalDecorators&quot;: true,
    &quot;lib&quot;: [&quot;es2015&quot;, &quot;dom&quot;],
    &quot;noImplicitAny&quot;: true,
    &quot;suppressImplicitAnyIndexErrors&quot;: true
  }
}
</code-pane><code-pane language="js" name="webpack.config.js" format="linenums">module.exports = require(&#39;./config/webpack.dev.js&#39;);
</code-pane><code-pane language="js" name="karma.conf.js" format="linenums">module.exports = require(&#39;./config/karma.conf.js&#39;);
</code-pane><code-pane language="js" name="config/helpers.js" format="linenums">var path = require(&#39;path&#39;);

var _root = path.resolve(__dirname, &#39;..&#39;);

function root(args) {
  args = Array.prototype.slice.call(arguments, 0);
  return path.join.apply(path, [_root].concat(args));
}

exports.root = root;
</code-pane></code-tabs><div class="l-sub-section"><p>Many of these files should be familiar from other Angular documentation guides,
especially the <a href="../guide/typescript-configuration.html">Typescript configuration</a> and
<a href="../guide/npm-packages.html">npm packages</a> guides.</p>
<p>这些文件很多都很眼熟，它们在其他文档里已经出现过，特别是<a href="../guide/typescript-configuration.html"><em>TypeScript配置</em></a>和<a href="../guide/npm-packages.html"><em>npm包</em></a>这两章里。</p>
<p>Webpack, the plugins, and the loaders are also installed as packages.
They are listed in the updated <code>packages.json</code>.</p>
<p>Webpack，包括它的插件以及加载器，也是以npm包的形式安装的，它们也列在了修改后的 package.json 中。</p>
</div><p>Open a terminal window and install the npm packages.</p>
<p>打开命令行窗口并安装这些<em>npm</em>包</p>
<code-example language="sh" class="code-shell">npm install
</code-example><a id="polyfills"></a><div class="l-main-section"></div><h3 id="polyfills">Polyfills</h3>
<p>You&#39;ll need polyfills to run an Angular application in most browsers as explained
in the <a href="browser-support.html">Browser Support</a> guide.</p>
<p>我们在<a href="browser-support.html"><em>浏览器支持</em></a>章节里解释过，Angular应用要能在大多数的浏览器里运行，它还需要一些polyfills。</p>
<p>Polyfills should be bundled separately from the application and vendor bundles.
Add a <code>polyfills.ts</code> like this one to the <code>src/</code> folder.</p>
<p>Polyfills最好跟应用代码和vendor代码区分开来单独打包，所以我们需要在<code>src/</code>文件夹里添加一个<code>polyfills.ts</code>文件，代码如下：</p>
<div class="code-example"><header><h4>src/polyfills.ts</h4></header><code-example language="ts" format="">import &#39;core-js/es6&#39;;
import &#39;core-js/es7/reflect&#39;;
require(&#39;zone.js/dist/zone&#39;);

if (process.env.ENV === &#39;production&#39;) {
  // Production
} else {
  // Development and test
  Error[&#39;stackTraceLimit&#39;] = Infinity;
  require(&#39;zone.js/dist/long-stack-trace-zone&#39;);
}
</code-example></div><div class="callout is-critical"><header>Loading polyfills</header><p>Load <code>zone.js</code> early within <code>polyfills.ts</code>, immediately after the other ES6 and metadata shims.</p>
<p><code>polyfills.ts</code>文件里，<code>zone.js</code>库须尽早引入，紧跟在ES6 shims和metadata shims之后。</p>
</div><p>Because this bundle file will load first, <code>polyfills.ts</code> is also a good place to configure the browser environment
for production or development.</p>
<p>由于这个包最先加载，所以<code>polyfills.ts</code>非常适合用来配置浏览器环境，如生产环境配置或是开发环境。</p>
<a id="common-configuration"></a><div class="l-main-section"></div><h3 id="common-configuration">Common configuration</h3>
<h3 id="-">通用配置</h3>
<p>Developers typically have separate configurations for development, production, and test environments.
All three have a lot of configuration in common.</p>
<p>开发、生产、测试等不同的环境通常会分开配置，但实际上这些配置也有很多地方是通用的。</p>
<p>Gather the common configuration in a file called <code>webpack.common.js</code>.</p>
<p>我们可以把这些通用的配置收归到一个文件，命名为<code>webpack.common.js</code>。</p>
<div class="code-example"><header><h4>config/webpack.common.js</h4></header><code-example language="js" format="">var webpack = require(&#39;webpack&#39;);
var HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
var ExtractTextPlugin = require(&#39;extract-text-webpack-plugin&#39;);
var helpers = require(&#39;./helpers&#39;);

module.exports = {
  entry: {
    &#39;polyfills&#39;: &#39;./src/polyfills.ts&#39;,
    &#39;vendor&#39;: &#39;./src/vendor.ts&#39;,
    &#39;app&#39;: &#39;./src/main.ts&#39;
  },

  resolve: {
    extensions: [&#39;.ts&#39;, &#39;.js&#39;]
  },

  module: {
    rules: [
      {
        test: /\.ts$/,
        loaders: [
          {
            loader: &#39;awesome-typescript-loader&#39;,
            options: { configFileName: helpers.root(&#39;src&#39;, &#39;tsconfig.json&#39;) }
          } , &#39;angular2-template-loader&#39;
        ]
      },
      {
        test: /\.html$/,
        loader: &#39;html-loader&#39;
      },
      {
        test: /\.(png|jpe?g|gif|svg|woff|woff2|ttf|eot|ico)$/,
        loader: &#39;file-loader?name=assets/[name].[hash].[ext]&#39;
      },
      {
        test: /\.css$/,
        exclude: helpers.root(&#39;src&#39;, &#39;app&#39;),
        loader: ExtractTextPlugin.extract({ fallbackLoader: &#39;style-loader&#39;, loader: &#39;css-loader?sourceMap&#39; })
      },
      {
        test: /\.css$/,
        include: helpers.root(&#39;src&#39;, &#39;app&#39;),
        loader: &#39;raw-loader&#39;
      }
    ]
  },

  plugins: [
    // Workaround for angular/angular#11580
    new webpack.ContextReplacementPlugin(
      // The (\\|\/) piece accounts for path separators in *nix and Windows
      /angular(\\|\/)core(\\|\/)@angular/,
      helpers.root(&#39;./src&#39;), // location of your src
      {} // a map of your routes
    ),

    new webpack.optimize.CommonsChunkPlugin({
      name: [&#39;app&#39;, &#39;vendor&#39;, &#39;polyfills&#39;]
    }),

    new HtmlWebpackPlugin({
      template: &#39;src/index.html&#39;
    })
  ]
};
</code-example></div><a id="inside-webpack-commonjs"></a><h3 id="inside-_webpack-common-js_">Inside <em>webpack.common.js</em></h3>
<h3 id="webpack-common-js-">webpack.common.js解读</h3>
<p>Webpack is a NodeJS-based tool that reads configuration from a JavaScript commonjs module file.</p>
<p>Webpack是基于NodeJS的一个工具，它能够从一个<em>commonjs</em>规范的JavaScript模块文件里读取配置。</p>
<p>The configuration imports dependencies with <code>require</code> statements
and exports several objects as properties of a <code>module.exports</code> object.</p>
<p>这个配置文件是通过<code>require</code>语句导入依赖，然后将多个对象作为<code>module.exports</code>对象的属性导出。</p>
<ul>
<li><p><a href="#common-entries"><code>entry</code></a>&mdash;the entry-point files that define the bundles.</p>
<p><a href="#common-entries"><code>entries</code></a> - 包体的入口文件。</p>
</li>
<li><p><a href="#common-resolve"><code>resolve</code></a>&mdash;how to resolve file names when they lack extensions.</p>
<p><a href="#common-resolve"><code>resolve</code></a> - 省略扩展名时如何解释文件名。</p>
</li>
<li><p><a href="#common-rules"><code>module.rules</code></a>&mdash; <code>module</code> is an object with <code>rules</code> for deciding how files are loaded.</p>
<p><a href="#common-rules"><code>module.rules</code></a> - <code>module</code>是一个对象，里面的<code>rules</code>属性用来决定文件如何加载。</p>
</li>
<li><p><a href="#common-plugins"><code>plugins</code></a>&mdash;creates instances of the plugins.</p>
<p><a href="#common-plugins"><code>plugins</code></a> - 创建插件的实例。</p>
</li>
</ul>
<a id="common-entries"></a><h4 id="_entry_"><em>entry</em></h4>
<p>The first export is the <code>entry</code> object:</p>
<p>如上所述，第一个导出的对象是<em>entries</em>：</p>
<div class="code-example"><header><h4>config/webpack.common.js</h4></header><code-example language="js" format="">  entry: {
    &#39;polyfills&#39;: &#39;./src/polyfills.ts&#39;,
    &#39;vendor&#39;: &#39;./src/vendor.ts&#39;,
    &#39;app&#39;: &#39;./src/main.ts&#39;
  },
</code-example></div><p>This <code>entry</code> object defines the three bundles:</p>
<p><code>entry</code>对象定义了三个包：</p>
<ul>
<li><p><code>polyfills</code>&mdash;the polyfills needed to run Angular applications in most modern browsers.</p>
<p><code>polyfills</code> - 使得Angular应用能够运行在大多数的现代浏览器。</p>
</li>
<li><p><code>vendor</code>&mdash;the third-party dependencies such as Angular, lodash, and bootstrap.css.</p>
<p><code>vendor</code> - 第三方依赖，如Angular、lodash和bootstrap.css。</p>
</li>
<li><p><code>app</code>&mdash;the application code.</p>
<p><code>app</code> - 应用代码。</p>
</li>
</ul>
<a id="common-resolve"></a><h4 id="_resolve_-extension-less-imports"><em>resolve</em> extension-less imports</h4>
<h4 id="_resolve_-"><em>resolve</em> 无扩展名的文件导入</h4>
<p>The app will <code>import</code> dozens if not hundreds of JavaScript and TypeScript files.
You could write <code>import</code> statements with explicit extensions like this example:</p>
<p>如果你的应用程序只须<code>import</code>几十个JavaScript或TypeScript文件，而不是几百个，你可以在<code>import</code>语句里完整写上扩展名，如：</p>
<div class="code-example"><code-example language="typescript">import { AppComponent } from './app.component.ts';
</code-example></div><p>But most <code>import</code> statements don&#39;t mention the extension at all.
Tell Webpack to resolve extension-less file requests by looking for matching files with
<code>.ts</code> extension or <code>.js</code> extension (for regular JavaScript files and pre-compiled TypeScript files).</p>
<p>但实际上大部分<code>import</code>语句都不带扩展名，我们可以告诉Webpack，在查找这些没有扩展名的文件时，自动加上<code>.ts</code>或者<code>.js</code>扩展名来匹配。</p>
<div class="code-example"><header><h4>config/webpack.common.js</h4></header><code-example language="js" format="">resolve: {
  extensions: [&#39;.ts&#39;, &#39;.js&#39;]
},
</code-example></div><div class="l-sub-section"><p>If Webpack should resolve extension-less files for styles and HTML,
add <code>.css</code> and <code>.html</code> to the list.</p>
<p>如果我们希望Webapck也能解析不带扩展名的样式和HTML文件，在列表里追加<code>.css</code>和<code>.html</code>即可。</p>
</div><a id="common-rules"></a><h4 id="_module-rules_"><em>module.rules</em></h4>
<p>Rules tell Webpack which loaders to use for each file, or module:</p>
<p>Rules用来告诉Webpack加载不同文件或模块时该用哪个加载器。</p>
<div class="code-example"><header><h4>config/webpack.common.js</h4></header><code-example language="js" format="">module: {
  rules: [
    {
      test: /\.ts$/,
      loaders: [
        {
          loader: &#39;awesome-typescript-loader&#39;,
          options: { configFileName: helpers.root(&#39;src&#39;, &#39;tsconfig.json&#39;) }
        } , &#39;angular2-template-loader&#39;
      ]
    },
    {
      test: /\.html$/,
      loader: &#39;html-loader&#39;
    },
    {
      test: /\.(png|jpe?g|gif|svg|woff|woff2|ttf|eot|ico)$/,
      loader: &#39;file-loader?name=assets/[name].[hash].[ext]&#39;
    },
    {
      test: /\.css$/,
      exclude: helpers.root(&#39;src&#39;, &#39;app&#39;),
      loader: ExtractTextPlugin.extract({ fallbackLoader: &#39;style-loader&#39;, loader: &#39;css-loader?sourceMap&#39; })
    },
    {
      test: /\.css$/,
      include: helpers.root(&#39;src&#39;, &#39;app&#39;),
      loader: &#39;raw-loader&#39;
    }
  ]
},
</code-example></div><ul>
<li><p><code>awesome-typescript-loader</code>&mdash;a loader to transpile the Typescript code to ES5, guided by the <code>tsconfig.json</code> file.</p>
<p><code>awesome-typescript-loader</code> - 一个用于把TypeScript代码转译成ES5的加载器，它会由<code>tsconfig.json</code>文件提供指导</p>
</li>
<li><p><code>angular2-template-loader</code>&mdash;loads angular components&#39; template and styles.</p>
<p><code>angular2-template-loader</code> - 用于加载Angular组件的模板和样式</p>
</li>
<li><p><code>html-loader</code>&mdash;for component templates.</p>
<p><code>html-loader</code> - 为组件模板准备的加载器</p>
</li>
<li><p>images/fonts&mdash;Images and fonts are bundled as well.</p>
<p><code>images/fonts</code> - 图片和字体文件也能被打包。</p>
</li>
<li><p>CSS&mdash;the first pattern matches application-wide styles; the second handles 
component-scoped styles (the ones specified in a component&#39;s <code>styleUrls</code> metadata property).</p>
<p>CSS - 第一个模式匹配应用级样式，第二个模式匹配组件局部样式(就是在组件元数据的<code>styleUrls</code>属性中指定的那些)。</p>
</li>
</ul>
<div class="l-sub-section"><p>The first pattern is for the application-wide styles. It excludes <code>.css</code> files within the <code>src/app</code> directory
where the component-scoped styles sit. The <code>ExtractTextPlugin</code> (described below) applies the <code>style</code> and <code>css</code>
loaders to these files.</p>
<p>第一个模式是给全局样式使用的，它排除了<code>/src/app</code>目录下的<code>.css</code>文件，因为那里放着我们的组件局部样式。
它只包含了那些位于<code>/src/app</code>及其上级目录的<code>.css</code>文件，那里是应用级样式。
<code>ExtractTextPlugin</code>(后面会讲到)使用<code>style</code>和<code>css</code>加载器来处理这些文件。</p>
<p>The second pattern filters for component-scoped styles and loads them as strings via the <code>raw-loader</code>,
which is what Angular expects to do with styles specified in a <code>styleUrls</code> metadata property.</p>
<p>第二个模式过滤器是给组件局部样式的，并通过<code>raw</code>加载器把它们加载成字符串 —— 那是Angular期望通过元数据的<code>styleUrls</code>属性来指定样式的形式。</p>
</div><div class="l-sub-section"><p>Multiple loaders can be chained using the array notation.</p>
<p>多重加载器也能使用数组形式串联起来。</p>
</div><a id="common-plugins"></a><h4 id="_plugins_"><em>plugins</em></h4>
<p>Finally, create instances of three plugins:</p>
<p>最后，创建三个插件实例：</p>
<div class="code-example"><header><h4>config/webpack.common.js</h4></header><code-example language="js" format="">plugins: [
  // Workaround for angular/angular#11580
  new webpack.ContextReplacementPlugin(
    // The (\\|\/) piece accounts for path separators in *nix and Windows
    /angular(\\|\/)core(\\|\/)@angular/,
    helpers.root(&#39;./src&#39;), // location of your src
    {} // a map of your routes
  ),

  new webpack.optimize.CommonsChunkPlugin({
    name: [&#39;app&#39;, &#39;vendor&#39;, &#39;polyfills&#39;]
  }),

  new HtmlWebpackPlugin({
    template: &#39;src/index.html&#39;
  })
]
</code-example></div><a id="commons-chunk-plugin"></a><h4 id="-commonschunkplugin-"><em>CommonsChunkPlugin</em></h4>
<p>The <code>app.js</code> bundle should contain only application code. All vendor code belongs in the <code>vendor.js</code> bundle. </p>
<p><code>app.js</code>包应该只包含应用代码。所有第三方代码都应该放进<code>vendor.js</code>包中。</p>
<p>Of course the application code imports vendor code. 
On its own,Webpack  is not smart enough to keep the vendor code out of the <code>app.js</code> bundle.
The <code>CommonsChunkPlugin</code> does that job. </p>
<p>当然，应用代码中还是要<code>imports</code>第三方代码。
Webpack还没有智能到自动把提供商代码排除在<code>app.js</code>包之外的程度。
<code>CommonsChunkPlugin</code>插件能完成此工作。</p>
<div class="l-sub-section"><p>The <code>CommonsChunkPlugin</code> identifies the hierarchy among three <em>chunks</em>: <code>app</code> -&gt; <code>vendor</code> -&gt; <code>polyfills</code>.
Where Webpack finds that <code>app</code> has shared dependencies with <code>vendor</code>, it removes them from <code>app</code>.
It would remove <code>polyfills</code> from <code>vendor</code> if they shared dependencies, which they don&#39;t.</p>
<p><code>CommonsChunkPlugin</code>标记出了三个<em>块</em>之间的等级体系：<code>app</code> -&gt; <code>vendor</code> -&gt; <code>polyfills</code>。
当Webpack发现<code>app</code>与<code>vendor</code>有共享依赖时，就把它们从<code>app</code>中移除。
在<code>vendor</code>和<code>polyfills</code>之间有共享依赖时也同样如此(虽然它们没啥可共享的)。</p>
</div><a id="html-webpack-plugin"></a><h4 id="_htmlwebpackplugin_"><em>HtmlWebpackPlugin</em></h4>
<p>Webpack generates a number of js and CSS files.
You <em>could</em> insert them into the <code>index.html</code> <em>manually</em>. That would be tedious and error-prone.
Webpack can inject those scripts and links for you with the <code>HtmlWebpackPlugin</code>.</p>
<p>Webpack生成了一些js和css文件。
虽然我们<em>可以手动</em>把它们插入到<code>index.html</code>中，但那样既枯燥又容易出错。
Webpack可以通过<code>HtmlWebpackPlugin</code>自动为我们注入那些<code>script</code>和<code>link</code>标签。</p>
<a id="environment-configuration"></a><div class="l-main-section"></div><h3 id="environment-specific-configuration">Environment-specific configuration</h3>
<h3 id="-">环境相关的配置</h3>
<p>The <code>webpack.common.js</code> configuration file does most of the heavy lifting. 
Create separate, environment-specific configuration files that build on <code>webpack.common</code>
by merging into it the peculiarities particular to the target environments.</p>
<p><code>webpack.common.js</code>配置做了大部分繁重的工作。
通过合并它们特有的配置，我们可以基于<code>webpack.common</code>为目标环境创建独立的、环境相关的配置文件。</p>
<p>These files tend to be short and simple.</p>
<p>这些文件越小越简单越好。</p>
<a id="development-configuration"></a><div class="l-main-section"></div><h3 id="development-configuration">Development configuration</h3>
<h3 id="-">开发环境配置</h3>
<p>Here is the <code>webpack.dev.js</code> development configuration file. </p>
<p>下面是开发环境的而配置文件<code>webpack.dev.js</code>：</p>
<div class="code-example"><header><h4>config/webpack.dev.js</h4></header><code-example language="js" format="">var webpackMerge = require(&#39;webpack-merge&#39;);
var ExtractTextPlugin = require(&#39;extract-text-webpack-plugin&#39;);
var commonConfig = require(&#39;./webpack.common.js&#39;);
var helpers = require(&#39;./helpers&#39;);

module.exports = webpackMerge(commonConfig, {
  devtool: &#39;cheap-module-eval-source-map&#39;,

  output: {
    path: helpers.root(&#39;dist&#39;),
    publicPath: &#39;/&#39;,
    filename: &#39;[name].js&#39;,
    chunkFilename: &#39;[id].chunk.js&#39;
  },

  plugins: [
    new ExtractTextPlugin(&#39;[name].css&#39;)
  ],

  devServer: {
    historyApiFallback: true,
    stats: &#39;minimal&#39;
  }
});
</code-example></div><p>The development build relies on the Webpack development server, configured near the bottom of the file.</p>
<p>开发环境下的构建依赖于Webpack的开发服务器，我们在靠近文件底部的地方配置了它。</p>
<p>Although you tell Webpack to put output bundles in the <code>dist</code> folder,
the dev server keeps all bundles in memory; it doesn&#39;t write them to disk.
You won&#39;t find any files in the <code>dist</code> folder ,at least not any generated from <em>this development build</em>.</p>
<p>虽然我们告诉Webpack把输出包放到<code>dist</code>目录，但实际上开发服务器把这些包都放在了内存里，而不会把它们写到硬盘中。
所以在<code>dist</code>目录下是找不到任何文件的(至少现在这个开发环境下构建时没有)。</p>
<p>The <code>HtmlWebpackPlugin</code> ,added in <code>webpack.common.js</code>, uses the <code>publicPath</code> and the <code>filename</code> settings to generate 
appropriate <code>&lt;script&gt;</code> and <code>&lt;link&gt;</code> tags into the <code>index.html</code>.</p>
<p><code>HtmlWebpackPlugin</code>(由<code>webpack.common.js</code>引入)插件使用了<em><code>publicPath</code></em>和<em><code>filename</code></em>设置，
来向<code>index.html</code>中插入适当的&lt;script&gt;和&lt;link&gt;标签。</p>
<p>The CSS styles are buried inside the Javascript bundles by default. The <code>ExtractTextPlugin</code> extracts them into
external <code>.css</code> files that the <code>HtmlWebpackPlugin</code> inscribes as <code>&lt;link&gt;</code> tags into the <code>index.html</code>.</p>
<p>默认情况下，我们这些CSS样式会被埋没在JavaScript包中。<code>ExtractTextPlugin</code>会把它们提取成外部<code>.css</code>文件，
这样<code>HtmlWebpackPlugin</code>插件就会转而把一个&lt;link&gt;标签写进<code>index.html</code>了。</p>
<p>Refer to the <a href="https://webpack.github.io/docs/">Webpack documentation</a> for details on these and other configuration options in this file.</p>
<p>要了解本文件中这些以及其它配置项的详情，请参阅<a href="https://webpack.github.io/docs/">Webpack文档</a>。</p>
<p>Grab the app code at the end of this guide and try:</p>
<p>抓取本指南底部的应用代码，并试一试：</p>
<code-example language="sh" class="code-shell">npm start
</code-example><a id="production-configuration"></a><div class="l-main-section"></div><h3 id="production-configuration">Production configuration</h3>
<h3 id="-">产品环境配置</h3>
<p>Configuration of a <em>production</em> build resembles <em>development</em> configuration  with a few key changes.</p>
<p><em>产品环境</em>下的配置和<em>开发环境</em>下的配置很相似……除了一些关键的改动。</p>
<div class="code-example"><header><h4>config/webpack.prod.js</h4></header><code-example language="js" format="">var webpack = require(&#39;webpack&#39;);
var webpackMerge = require(&#39;webpack-merge&#39;);
var ExtractTextPlugin = require(&#39;extract-text-webpack-plugin&#39;);
var commonConfig = require(&#39;./webpack.common.js&#39;);
var helpers = require(&#39;./helpers&#39;);

const ENV = process.env.NODE_ENV = process.env.ENV = &#39;production&#39;;

module.exports = webpackMerge(commonConfig, {
  devtool: &#39;source-map&#39;,

  output: {
    path: helpers.root(&#39;dist&#39;),
    publicPath: &#39;/&#39;,
    filename: &#39;[name].[hash].js&#39;,
    chunkFilename: &#39;[id].[hash].chunk.js&#39;
  },

  plugins: [
    new webpack.NoEmitOnErrorsPlugin(),
    new webpack.optimize.UglifyJsPlugin({ // https://github.com/angular/angular/issues/10618
      mangle: {
        keep_fnames: true
      }
    }),
    new ExtractTextPlugin(&#39;[name].[hash].css&#39;),
    new webpack.DefinePlugin({
      &#39;process.env&#39;: {
        &#39;ENV&#39;: JSON.stringify(ENV)
      }
    }),
    new webpack.LoaderOptionsPlugin({
      htmlLoader: {
        minimize: false // workaround for ng2
      }
    })
  ]
});
</code-example></div><p>You&#39;ll deploy the application and its dependencies to a real production server.
You won&#39;t deploy the artifacts needed only in development.</p>
<p>我们希望把应用程序及其依赖都部署到一个真实的产品服务器中。
而不希望部署那些只在开发环境下才用得到的依赖。</p>
<p>Put the production output bundle files in the <code>dist</code> folder.</p>
<p>把产品环境的输出包放在<code>dist</code>目录下。</p>
<p>Webpack generates file names with cache-busting hash.
Thanks to the <code>HtmlWebpackPlugin</code>, you don&#39;t have to update the <code>index.html</code> file when the hash changes.</p>
<p>Webpack生成的文件名中带有“缓存无效哈希(cache-busting hash)”。
感谢<code>HtmlWebpackPlugin</code>插件，当这些哈希值变化时，我们不用去更新<code>index.html</code>了。</p>
<p>There are additional plugins:</p>
<p>还有一些别的插件：</p>
<ul>
<li><p>*<code>NoEmitOnErrorsPlugin</code>&mdash; stops the build if there is an error.</p>
<p><em><code>NoEmitOnErrorsPlugin</code></em> - 如果出错就停止构建。* </p>
</li>
</ul>
<p>*<code>UglifyJsPlugin</code>&mdash; minifies the bundles.</p>
<p>  <code>UglifyJsPlugin</code> - 最小化(minify)生成的包。</p>
<ul>
<li><p>*<code>ExtractTextPlugin</code>&mdash; extracts embedded css as external files, adding cache-busting hash to the filename.</p>
<p><em><code>ExtractTextPlugin</code></em> - 把内嵌的css抽取成外部文件，并为其文件名添加“缓存无效哈希”。</p>
</li>
<li><p>*<code>DefinePlugin</code>&mdash; use to define environment variables that you can reference within the application.</p>
<p><em><code>DefinePlugin</code></em> - 用来定义环境变量，以便我们在自己的程序中引用它。</p>
</li>
<li><p>*<code>LoaderOptionsPlugins</code>&mdash; to override options of certain loaders.</p>
<p><em><code>LoaderOptionsPlugins</code></em> - 为特定的加载器提供选项。</p>
</li>
</ul>
<p>Thanks to the <code>DefinePlugin</code> and the <code>ENV</code> variable defined at top, you can enable Angular production mode like this:</p>
<p>感谢<em>DefinePlugin</em>和顶部定义的<code>ENV</code>变量，我们就可以像这样启用Angular的产品模式了：</p>
<div class="code-example"><code-example language="ts" format="">if (process.env.ENV === &#39;production&#39;) {
  enableProdMode();
}
</code-example></div><p>Grab the app code at the end of this guide and try:</p>
<p>抓取本指南底部的应用代码，并试一试：</p>
<code-example language="sh" class="code-shell">npm run build
</code-example><a id="test-configuration"></a><div class="l-main-section"></div><h3 id="test-configuration">Test configuration</h3>
<h3 id="-">测试环境配置</h3>
<p>You don&#39;t need much configuration to run unit tests.
You don&#39;t need the loaders and plugins that you declared for your development and production builds.
You probably don&#39;t need to load and process the application-wide styles files for unit tests and doing so would slow you down;
you&#39;ll use the <code>null</code> loader for those CSS files.</p>
<p>我们并不需要使用很多配置项来运行单元测试。
也不需要在开发环境和产品环境下引入的那些加载器和插件。
如果有可能拖慢执行速度，甚至都不需要在单元测试中加载和处理应用全局样式文件，所以我们用一个<code>null</code>加载器来处理所有CSS。</p>
<p>You could merge the test configuration into the <code>webpack.common</code> configuration and override the parts you don&#39;t want or need.
But it might be simpler to start over with a completely fresh configuration.</p>
<p>我们可以把测试环境的配置合并到<code>webpack.common</code>配置中，并且改写不想要或不需要的部分。
但是从一个全新的配置开始可能更简单。</p>
<div class="code-example"><header><h4>config/webpack.test.js</h4></header><code-example language="js" format="">var webpack = require(&#39;webpack&#39;);
var helpers = require(&#39;./helpers&#39;);

module.exports = {
  devtool: &#39;inline-source-map&#39;,

  resolve: {
    extensions: [&#39;.ts&#39;, &#39;.js&#39;]
  },

  module: {
    rules: [
      {
        test: /\.ts$/,
        loaders: [
          {
            loader: &#39;awesome-typescript-loader&#39;,
            options: { configFileName: helpers.root(&#39;src&#39;, &#39;tsconfig.json&#39;) }
          } , &#39;angular2-template-loader&#39;
        ]
      },
      {
        test: /\.html$/,
        loader: &#39;html-loader&#39;

      },
      {
        test: /\.(png|jpe?g|gif|svg|woff|woff2|ttf|eot|ico)$/,
        loader: &#39;null-loader&#39;
      },
      {
        test: /\.css$/,
        exclude: helpers.root(&#39;src&#39;, &#39;app&#39;),
        loader: &#39;null-loader&#39;
      },
      {
        test: /\.css$/,
        include: helpers.root(&#39;src&#39;, &#39;app&#39;),
        loader: &#39;raw-loader&#39;
      }
    ]
  },

  plugins: [
    new webpack.ContextReplacementPlugin(
      // The (\\|\/) piece accounts for path separators in *nix and Windows
      /angular(\\|\/)core(\\|\/)(esm(\\|\/)src|src)(\\|\/)linker/,
      helpers.root(&#39;./src&#39;), // location of your src
      {} // a map of your routes
    )
  ]
}
</code-example></div><p>Reconfigure <a href="https://karma-runner.github.io/1.0/index.html">Karma</a> to use Webpack to run the tests:</p>
<p>重新配置<a href="https://karma-runner.github.io/1.0/index.html">Karma</a>，让它使用webpack来运行这些测试：</p>
<div class="code-example"><header><h4>config/karma.conf.js</h4></header><code-example language="js" format="">var webpackConfig = require(&#39;./webpack.test&#39;);

module.exports = function (config) {
  var _config = {
    basePath: &#39;&#39;,

    frameworks: [&#39;jasmine&#39;],

    files: [
      {pattern: &#39;./config/karma-test-shim.js&#39;, watched: false}
    ],

    preprocessors: {
      &#39;./config/karma-test-shim.js&#39;: [&#39;webpack&#39;, &#39;sourcemap&#39;]
    },

    webpack: webpackConfig,

    webpackMiddleware: {
      stats: &#39;errors-only&#39;
    },

    webpackServer: {
      noInfo: true
    },

    reporters: [&#39;kjhtml&#39;],
    port: 9876,
    colors: true,
    logLevel: config.LOG_INFO,
    autoWatch: false,
    browsers: [&#39;Chrome&#39;],
    singleRun: true
  };

  config.set(_config);
};
</code-example></div><p>You don&#39;t precompile the TypeScript; Webpack transpiles the Typescript files on the fly, in memory, and feeds the emitted JS directly to Karma.
There are no temporary files on disk.</p>
<p>我们不用预编译TypeScript，Webpack随时在内存中转译我们的TypeScript文件，并且把产出的JS直接反馈给Karma。
硬盘上没有任何临时文件。</p>
<p>The <code>karma-test-shim</code> tells Karma what files to pre-load and 
primes the Angular test framework with test versions of the providers that every app expects to be pre-loaded.</p>
<p><code>karma-test-shim</code>告诉Karma哪些文件需要预加载，首要的是：带有“测试版提供商”的Angular测试框架是每个应用都希望预加载的。</p>
<div class="code-example"><header><h4>config/karma-test-shim.js</h4></header><code-example language="js" format="">Error.stackTraceLimit = Infinity;

require(&#39;core-js/es6&#39;);
require(&#39;core-js/es7/reflect&#39;);

require(&#39;zone.js/dist/zone&#39;);
require(&#39;zone.js/dist/long-stack-trace-zone&#39;);
require(&#39;zone.js/dist/proxy&#39;);
require(&#39;zone.js/dist/sync-test&#39;);
require(&#39;zone.js/dist/jasmine-patch&#39;);
require(&#39;zone.js/dist/async-test&#39;);
require(&#39;zone.js/dist/fake-async-test&#39;);

var appContext = require.context(&#39;../src&#39;, true, /\.spec\.ts/);

appContext.keys().forEach(appContext);

var testing = require(&#39;@angular/core/testing&#39;);
var browser = require(&#39;@angular/platform-browser-dynamic/testing&#39;);

testing.TestBed.initTestEnvironment(browser.BrowserDynamicTestingModule, browser.platformBrowserDynamicTesting());
</code-example></div><p>Notice that you do <em>not</em> load the application code explicitly.
You tell Webpack to find and load the test files (the files ending in <code>.spec.ts</code>).
Each spec file imports all&mdash;and only&mdash;the application source code that it tests.
Webpack loads just <em>those</em> specific application files and ignores the other files that you aren&#39;t testing.</p>
<p>注意，我们<em>并没有</em>明确加载这些应用代码。
只是告诉Webpack查找并加载我们的测试文件(文件名以<code>.spec.ts</code>结尾)。
每个规约(spec)文件都导入了所有(也只有)它测试所需的应用源码。
Webpack只加载<em>那些</em>特定的应用文件，而忽略所有其它我们不会测试到的。</p>
<p>Grab the app code at the end of this guide and try:</p>
<p>抓取本指南底部的应用代码，并试一试：</p>
<code-example language="sh" class="code-shell">npm test
</code-example><a id="try"></a><h2 id="trying-it-out">Trying it out</h2>
<h2 id="-">试一试</h2>
<p>Here is the source code for a small application that bundles with the
Webpack techniques covered in this guide.</p>
<p>这里是一个小型应用的全部源码，我们可以用本章中学到的Webpack技术打包它们。</p>
<code-tabs><code-pane language="html" name="src/index.html" format="linenums">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;base href=&quot;/&quot;&gt;
    &lt;title&gt;Angular With Webpack&lt;/title&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;my-app&gt;Loading...&lt;/my-app&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code-pane><code-pane language="ts" name="src/main.ts" format="linenums">import { platformBrowserDynamic } from &#39;@angular/platform-browser-dynamic&#39;;
import { enableProdMode } from &#39;@angular/core&#39;;

import { AppModule } from &#39;./app/app.module&#39;;

if (process.env.ENV === &#39;production&#39;) {
  enableProdMode();
}

platformBrowserDynamic().bootstrapModule(AppModule);
</code-pane><code-pane language="css" name="src/assets/css/styles.css" format="linenums">body {
    background: #0147A7;
    color: #fff;
}
</code-pane></code-tabs><code-tabs><code-pane language="ts" name="src/app/app.component.ts" format="linenums">import { Component } from &#39;@angular/core&#39;;

import &#39;../assets/css/styles.css&#39;;

@Component({
  selector: &#39;my-app&#39;,
  templateUrl: &#39;./app.component.html&#39;,
  styleUrls: [&#39;./app.component.css&#39;]
})
export class AppComponent { }
</code-pane><code-pane language="html" name="src/app/app.component.html" format="linenums">&lt;main&gt;
  &lt;h1&gt;Hello from Angular App with Webpack&lt;/h1&gt;

  &lt;img src=&quot;../assets/images/angular.png&quot;&gt;
&lt;/main&gt;
</code-pane><code-pane language="css" name="src/app/app.component.css" format="linenums">main {
  padding: 1em;
  font-family: Arial, Helvetica, sans-serif;
  text-align: center;
  margin-top: 50px;
  display: block;
}
</code-pane><code-pane language="ts" name="src/app/app.component.spec.ts" format="linenums">import { TestBed } from &#39;@angular/core/testing&#39;;

import { AppComponent } from &#39;./app.component&#39;;

describe(&#39;App&#39;, () =&gt; {
  beforeEach(() =&gt; {
    TestBed.configureTestingModule({ declarations: [AppComponent]});
  });

  it (&#39;should work&#39;, () =&gt; {
    let fixture = TestBed.createComponent(AppComponent);
    expect(fixture.componentInstance instanceof AppComponent).toBe(true, &#39;should create AppComponent&#39;);
  });
});
</code-pane><code-pane language="ts" name="src/app/app.module.ts" format="linenums">import { NgModule } from &#39;@angular/core&#39;;
import { BrowserModule }  from &#39;@angular/platform-browser&#39;;

import { AppComponent } from &#39;./app.component&#39;;

@NgModule({
  imports: [
    BrowserModule
  ],
  declarations: [
    AppComponent
  ],
  bootstrap: [ AppComponent ]
})
export class AppModule { }
</code-pane></code-tabs><p>The <code>app.component.html</code> displays this downloadable Angular logo
<a href="https://raw.githubusercontent.com/angular/angular.io/master/public/resources/images/logos/angular/angular.png" target="_blank">
<img src="/resources/images/logos/angular/angular.png" height="40px" title="download Angular logo"></a>.
Create a folder called <code>images</code> under the project&#39;s <code>assets</code> folder, then right-click (Cmd+click on Mac) 
on the image and download it to that folder.</p>
<p><code>app.component.html</code>显示了这个可下载的Angular Logo
<a href="/resources/images/logos/angular2/angular.png" target="_blank">
<img src="/resources/images/logos/angular2/angular.png" height="40px" title="download Angular logo"></a>。
在项目的<code>assets</code>目录下创建一个名叫<code>images</code>的文件夹，然后右键点击（Mac上是Cmd+点击）本图片，并把它下载到<code>images</code>文件夹中。</p>
<a id="bundle-ts"></a><p>Here again are the TypeScript entry-point files that define the <code>polyfills</code> and <code>vendor</code> bundles.</p>
<p>这里又是TypeScript的入口点文件，它定义了<code>polyfills</code>和<code>vendor</code>这两个包。</p>
<code-tabs><code-pane language="ts" name="src/polyfills.ts" format="linenums">import &#39;core-js/es6&#39;;
import &#39;core-js/es7/reflect&#39;;
require(&#39;zone.js/dist/zone&#39;);

if (process.env.ENV === &#39;production&#39;) {
  // Production
} else {
  // Development and test
  Error[&#39;stackTraceLimit&#39;] = Infinity;
  require(&#39;zone.js/dist/long-stack-trace-zone&#39;);
}
</code-pane><code-pane language="ts" name="src/vendor.ts" format="linenums">// Angular
import &#39;@angular/platform-browser&#39;;
import &#39;@angular/platform-browser-dynamic&#39;;
import &#39;@angular/core&#39;;
import &#39;@angular/common&#39;;
import &#39;@angular/http&#39;;
import &#39;@angular/router&#39;;

// RxJS
import &#39;rxjs&#39;;

// Other vendors for example jQuery, Lodash or Bootstrap
// You can import js, ts, css, sass, ...
</code-pane></code-tabs><a id="highlights"></a><h3 id="highlights">Highlights</h3>
<h3 id="-">重点：</h3>
<ul>
<li><p>There are no <code>&lt;script&gt;</code> or <code>&lt;link&gt;</code> tags in the <code>index.html</code>. 
The <code>HtmlWebpackPlugin</code> inserts them dynamically at runtime.</p>
<p>在<code>index.html</code>中没有&lt;script&gt;或&lt;link&gt;标签。
<code>HtmlWebpackPlugin</code>会在运行时动态插入它们。</p>
</li>
<li><p>The <code>AppComponent</code> in <code>app.component.ts</code> imports the application-wide css with a simple <code>import</code> statement.</p>
<p><code>app.component.ts</code>中的<code>AppComponent</code>类简单的用一个<code>import</code>语句导入了应用级css。</p>
</li>
<li><p>The <code>AppComponent</code> itself has its own html template and css file. WebPack loads them with calls to <code>require()</code>.
Webpack stashes those component-scoped files in the <code>app.js</code> bundle too.
You don&#39;t see those calls in the source code; 
they&#39;re added behind the scenes by the <code>angular2-template-loader</code> plug-in. </p>
<p><code>AppComponent</code>组件本身有它自己的HTML模板和CSS文件。Webpack通过调用<code>require()</code>方法加载它们。Webpack还把那些组件内部的文件打包进了<code>app.js</code>中。
我们在自己的源码中看不到这些调用，这些工作是由幕后的<code>angular2-template-loader</code>插件完成的。</p>
</li>
<li><p>The <code>vendor.ts</code> consists of vendor dependency <code>import</code> statements that drive the <code>vendor.js</code> bundle.
The application imports these modules too; they&#39;d be duplicated in the <code>app.js</code> bundle
if the <code>CommonsChunkPlugin</code> hadn&#39;t detected the overlap and removed them from <code>app.js</code>.</p>
<p><code>vendor.ts</code>由<code>import</code>提供商依赖的语句组成，它最终决定了<code>vender.js</code>的内容。
本应用也导入这些模块，如果没有<code>CommonsChunkPlugin</code>插件检测出这种重叠，并且把它们从<code>app.js</code>中移除，它们就会同时出现在<code>app.js</code>包中。</p>
</li>
</ul>
<a id="conclusion"></a><h2 id="conclusion">Conclusion</h2>
<h2 id="-">总结</h2>
<p>You&#39;ve learned just enough Webpack to configurate development, test and production builds 
for a small Angular application.</p>
<p>我们学到了刚好够用来在开发、测试、产品环境下构建一个小型Angular应用的Webpack配置知识。</p>
<p><em>You could always do more</em>. Search the web for expert advice and expand your Webpack knowledge.</p>
<p><em>但我们还能做得更多</em>。搜索互联网来获得专家的建议，并扩展你对Webpack的认识。</p>
<p><a href="#top">Back to top</a></p>
<p><a href="#top">回到顶部</a></p><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--><!-- CHECK IF CURRENT PAGE IS SET, THEN SET NEXT PAGE--><!-- SET CURRENT PAGE FLAG WHEN YOU PASS IT--></article><div data-swiftype-index="false" class="main-footer"><nav class="background-midnight grid-fluid"><div class="c3 main-footer-branding"><div class="logo-inverse-large"></div></div><div class="c2"><h3 class="text-headline">RESOURCES</h3><h3 class="text-headline">资源库</h3><ul class="text-body"><!-- TODO: (ericjim) make a libraries page to showcase all angular libraries--><!--li <a href="/libraries.html">Libraries</a>--><li><p><a href="/about/">About</a></p><p><a href="/about/">关于</a></p></li><li><p><a href="/resources/#Education">Books & Training</a></p><p><a href="/resources/#Education">书籍与培训</a></p></li><li><p><a href="/resources/">Tools & Libraries</a></p><p><a href="/resources/">工具与库</a></p></li><li><p><a href="/resources/">Community</a></p><p><a href="/resources/">社区</a></p></li><li><p><a href="/presskit.html">Press Kit</a></p><p><a href="/presskit.html">宣传资料</a></p></li></ul></div><div class="c2"><h3 class="text-headline">HELP</h3><h3 class="text-headline">帮助</h3><ul class="text-body"><li><a href="http://stackoverflow.com/questions/tagged/angular2">Stack Overflow</a></li><li><a href="https://gitter.im/angular/angular">Gitter</a></li><li><a href="https://groups.google.com/forum/#!forum/angular"> Google Group</a></li><li><p><a href="https://github.com/angular/angular/issues"> Report Issues</a></p><p><a href="https://github.com/angular/angular/issues"> 报告问题</a></p></li><li><p><a class="footer-feedback" ng-click="appCtrl.openFeedback()" aria-label="Submit feedback on this page"> Site Feedback</a></p><p><a class="footer-feedback" ng-click="appCtrl.openFeedback()" aria-label="Submit feedback on this page"> 网站反馈</a></p></li></ul></div><div class="c2"><h3 class="text-headline">COMMUNITY</h3><h3 class="text-headline">社区</h3><ul class="text-body"><li><p><a href="/events.html">Events</a></p><p><a href="/events.html">会议</a></p></li><li><a href="http://www.meetup.com/topics/angularjs/">Meetups</a></li><li><a href="https://twitter.com/angular"> Twitter</a></li><li><a href="https://github.com/angular/angular"> GitHub</a></li><li><p><a href="/contribute.html"> Contribute</a></p><p><a href="/contribute.html"> 做贡献</a></p></li></ul></div><div class="c2"><h3 class="text-headline">LANGUAGES</h3><h3 class="text-headline">其它语种</h3><ul class="text-body"><li><a href="https://angular.io/">英文版</a></li></ul></div></nav><footer class="background-midnight"><small class="text-caption">Powered by Google ©2010-2017。代码授权方式：<a href="/license">MIT-style License</a>。文档授权方式：<a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>。</small><a aria-label="查看风格指南" href="/docs/ts/latest/styleguide.html" title="风格指南" md-button="md-button" class="styleguide-trigger text-snow translated-cn"><span class="icon-favorite"></span></a><p><small class="text-caption">本网站由洛阳永欣维护 &nbsp;<a href="http://www.miitbeian.gov.cn/">豫ICP备16019859号-1</a></small></p></footer></div><!-- VENDORS --><script src="/resources/js/vendor/prettify.js"></script><script src="/resources/js/vendor/lang-basic.js"></script><script src="/resources/js/vendor/lang-dart.js"></script><script src="/resources/js/vendor/lodash.js"></script><script src="/resources/js/vendor/clipboard.min.js"></script><!-- Angular Material Dependencies --><script src="/resources/js/vendor/angular.min.js"></script><script src="/resources/js/vendor/angular-animate.min.js"></script><script src="/resources/js/vendor/angular-aria.min.js"></script><script src="/resources/js/vendor/angular-material.min.js"></script><!-- Firebase -->
<script src="/resources/js/vendor/firebase.js"></script>
<!-- AngularFire -->
<script src="/resources/js/vendor/angularfire.min.js"></script>
<!-- Angular.io Site JS --><script src="/translate/cn/translate.js"></script><script src="/resources/js/site.js"></script><script src="/resources/js/util.js"></script><script src="/resources/js/controllers/app-controller.js"></script><script src="/resources/js/controllers/resources-controller.js"></script><script src="/resources/js/directives/cheatsheet.js"></script><script src="/resources/js/directives/api-list.js"></script><script src="/resources/js/directives/bio.js"></script><script src="/resources/js/directives/bold.js"></script><script src="/resources/js/directives/announcement-bar.js"></script><script src="/resources/js/directives/code.js"></script><script src="/resources/js/directives/copy.js"></script><script src="/resources/js/directives/code-tabs.js"></script><script src="/resources/js/directives/code-pane.js"></script><script src="/resources/js/directives/code-example.js"></script><script src="/resources/js/directives/if-docs.js"></script><script src="/resources/js/directives/live-example.js"></script><script src="/resources/js/directives/scroll-y-offset-element.js"></script><!-- GA --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-80456300-1', 'auto');
ga('send', 'pageview')
</script><!-- SWIFTYPE --><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','VsuU7kH5Hnnj9tfyNvfK','2.0.0');</script></body></html>