<!DOCTYPE html><html lang="en" ng-app="angularIOApp" itemscope itemtype="http://schema.org/Framework"><!-- template: public/docs/_layout--><head><title>Dynamic Forms - ts</title><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta name="keywords" content="Angular, 中文, 中文版, AngularJS, AngularDart, Javscript, Dart, Framework, JavaScript MVC, Google"/><meta name="robots" content="all"/><meta name="referrer" content="origin"/><meta name="viewport" id="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Angular"/><meta property="og:image" content="/resources/images/logos/standard/shield-large.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="184"/><meta property="og:image:height" content="200"/><meta property="og:description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta itemprop="name" content="Angular"/><meta itemprop="description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta itemprop="image" content="/resources/images/logos/standard/shield-large.png"/><link rel="icon" type="image/x-icon" href="/resources/images/icons/favicon.ico"/><link rel="stylesheet" href="/resources/css/vendor/angular-material.min.css"/><link href="/resources/fonts/vendor/roboto.css" rel="stylesheet" type="text/css"/><link href="/resources/fonts/vendor/material-icons.css" rel="stylesheet"/><link rel="stylesheet" href="/resources/css/vendor/icomoon/style.css"/><link rel="stylesheet" href="/resources/css/vendor/animate.css"/><link rel="stylesheet" href="/resources/css/main.css"/><!-- MOBILE ICONS -->
<link rel="apple-touch-icon" sizes="57x57" href="/resources/images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/resources/images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/resources/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/resources/images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/resources/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/resources/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/resources/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/resources/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/resources/images/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/resources/images/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/resources/images/favicons/manifest.json"></head><body ng-controller="AppCtrl as appCtrl" class="l-offset-nav l-offset-side-nav"><nav scroll-y-offset-element="scroll-y-offset-element" class="main-nav l-pinned-top l-layer-5"><h1><a href="/" md-button>Angular <sup>by Google</sup></a></h1><button aria-label="查看菜单" ng-click="appCtrl.toggleMainMenu($event)" md-button="md-button" class="main-nav-button main-nav-mobile-trigger l-right">网站菜单 <span class="icon icon-arrow-drop-down"></span></button><ul ng-class="appCtrl.showMainNav ? 'is-visible' : ''"><li class="l-left"><a class="main-nav-button" href="/features.html" md-button>特性</a></li><li class="l-left"><a class="main-nav-button" href="/docs/ts/latest/" md-button>文档</a></li><li class="l-left"><a class="main-nav-button" href="/events.html" md-button>会议</a></li><li class="l-left"><a class="main-nav-button" href="/news.html" md-button>新闻</a></li><li class="l-left"><a class="main-nav-button" href="/translate/cn/home.html" md-button>关于中文版</a></li><li class="l-right"><a class="main-nav-button" href="/docs/ts/latest/quickstart.html" md-button>立即开始！</a></li><li class="l-right"><a ng-click="appCtrl.toggleSource($event)" href="href" class="main-nav-button md-button ng-cloak"><span>{{appCtrl.sourceVisible?'Hide English':'Show English'}}</span></a></li></ul></nav><!-- Include this file ONLY when current.path[2] is defined--><nav ng-class="appCtrl.showDocsNav ? 'is-visible' : ''" class="sidenav l-pinned-left l-layer-4 l-offset-nav"><!-- SEARCH BAR--><header class="sidenav-search st-input-wrapper"><form class="st-input-inner"><label for="search-io" class="is-hidden">搜索文档</label><input type="search" id="search-io" placeholder="搜索文档..."/></form><button aria-label="查看文档菜单" ng-click="appCtrl.toggleDocsMenu($event)" md-button="md-button" class="mobile-trigger button">文档 <span class="icon icon-arrow-drop-down"></span></button></header><ul class="sidenav-links"><li class="sidenav-section no-border"><a href="/docs/ts/latest/" class="nav-title">文档首页</a></li><!-- CORE DOCUMENTATION--><li class="sidenav-section-divider"><h3>核心文档</h3></li><li class="sidenav-section"><a href="/docs/ts/latest/quickstart.html" title="Angular快速起步" class="nav-title ">快速起步</a></li><li class="sidenav-section"><a href="/docs/ts/latest/guide/" title="如何阅读本文档" class="nav-title is-parent ">开发指南<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-ordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/guide/" title="如何阅读本文档">1. 概览</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/architecture.html" title="Angular应用的基本构造块">2. 架构</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/displaying-data.html" title="利用插值表达式和其它形式的属性绑定机制，把数据显示到UI上。">3. 显示数据</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/user-input.html" title="用户输入触发DOM事件。我们通过事件绑定来监听它们，把更新过的数据导入回我们的组件和model。">4. 用户输入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/forms.html" title="表单创建一个有机、有效、引人注目的数据输入体验。Angular表单协调一组数据绑定控件，跟踪变更，验证输入的有效性，并且显示错误信息。">5. 表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/dependency-injection.html" title="Angular的依赖注入系统能够JIT(刚好及时)的创建和交付所依赖的服务。">6. 依赖注入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/template-syntax.html" title="学习如何写模板来显示数据，以及在数据绑定的帮助下响应用户事件。">7. 模板语法</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/cheatsheet.html" title="一份Angular语法的快速指南">8. Angular小抄</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/style-guide.html" title="如何写Angular风格的程序">9. 风格指南</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/glossary.html" title="Angular重要词汇的简短定义。">10. 词汇表</a></li></ul></div></li><li class="sidenav-section no-border"><a href="/docs/ts/latest/api/" title="API参考手册" class="nav-title ">API参考手册</a></li><!-- ADVANCED DOCUMENATION--><li class="sidenav-section-divider"><h3>附加文档</h3></li><li class="sidenav-section"><a href="/docs/ts/latest/tutorial/" title="英雄指南教程带我们一步步使用TypeScript创建Angular应用。" class="nav-title is-parent ">教程<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-ordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/" title="英雄指南教程带我们一步步使用TypeScript创建Angular应用。">1. 简介</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt1.html" title="我们构建一个简单的英雄编辑器">2. 英雄编辑器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt2.html" title="我们构建一个主从结构的页面，用于展现英雄列表">3. 主从结构</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt3.html" title="我们把主从结构的页面重构成多个组件">4. 多个组件</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt4.html" title="我们创建一个可复用的服务来调用英雄的数据">5. 服务</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt5.html" title="我们添加一个Angular组件路由，并且学习在视图之间导航">6. 路由</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt6.html" title="把我们的服务和组件改为用Angular的HTTP服务实现">7. HTTP</a></li></ul></div></li><li class="sidenav-section"><a href="/docs/ts/latest/guide/ngmodule.html" title="用@NgModule定义应用中的模块" class="nav-title is-parent ">高级文档<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-unordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/guide/ngmodule.html" title="用@NgModule定义应用中的模块" class="translated-cn">Angular模块（NgModule）</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/animations.html" title="Angular动画系统指南。" class="translated-cn">动画</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/attribute-directives.html" title="属性型指令把行为添加到现有元素上。" class="translated-cn">属性型指令</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/browser-support.html" title="浏览器支持与填充（Polyfill）指南" class="translated-cn">浏览器支持</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/component-styles.html" title="学习如何给组件应用CSS样式。" class="translated-cn">组件样式</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/hierarchical-dependency-injection.html" title="Angular的多级依赖注入系统支持与组件树并行的嵌套式注入器。" class="translated-cn">多级注入器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/server-communication.html" title="通过HTTP客户端与远程服务器对话。" class="translated-cn">HTTP客户端</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/lifecycle-hooks.html" title="Angular调用指令和组件的生命周期钩子函数，包括它的创建、变更和销毁时。" class="translated-cn">生命周期钩子</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/npm-packages.html" title="推荐的npm包以及如何指定所依赖的包" class="translated-cn">Npm包</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/pipes.html" title="管道可以在模板中转换显示的内容。" class="translated-cn">管道</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/router.html" title="揭示如何通过Angular路由进行基本的屏幕导航。" class="translated-cn">路由与导航</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/security.html" title="开发“内容安全”的Angular应用。" class="translated-cn">安全</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/structural-directives.html" title="Angular有一个强力的模板引擎，它能让你轻松维护元素的DOM树结构。" class="translated-cn">结构型指令</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/testing.html" title="Angular应用的测试技术与实践。" class="translated-cn">测试</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/typescript-configuration.html" title="Angular开发者的TypeScript配置" class="translated-cn">TypeScript配置</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/upgrade.html" title="Angular 1应用可以逐步升级到Angular 2。" class="translated-cn">从1.x升级</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/webpack.html" title="使用基于Webpack的工具创建Angular应用" class="translated-cn">Webpack简介</a></li></ul></div></li><li class="sidenav-section"><a href="/docs/ts/latest/cookbook/" title="一组常见Angular应用场景的“烹饪宝典”" class="nav-title is-parent ">烹饪宝典<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-unordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/" title="一组常见Angular应用场景的“烹饪宝典”" class="translated-cn">概览</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/aot-compiler.html" title="学习如何使用预编译器" class="translated-cn">预（AoT）编译器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/a1-a2-quick-reference.html" title="学习如何把Angular 1中的概念和技术对应到Angular 2中" class="translated-cn">Angular从1到2快速参考</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ngmodule-faq.html" title="对@NgModule常见问题的解答" class="translated-cn">Angular模块常见问题</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/component-communication.html" title="在不同的指令和组件之间共享信息" class="translated-cn">组件通讯</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/component-relative-paths.html" title="为组件的模板和样式指定相对于组件的路径" class="translated-cn">相对于组件的路径</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dependency-injection.html" title="依赖注入技术" class="translated-cn">依赖注入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dynamic-form.html" title="用FormGroup渲染动态表单" class="translated-cn">动态表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/form-validation.html" title="验证用户在表单中的输入" class="translated-cn">表单验证</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/rc4-to-rc5.html" title="分分钟把RC4迁移到RC5" class="translated-cn">如何从RC4迁移到RC5</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/set-document-title.html" title="使用Title服务来设置文档标题或窗口标题" class="translated-cn">设置文档标题</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ts-to-js.html" title="把Angular的TypeScript范例转换为ES5 JavaScript" class="translated-cn">从TypeScript到JavaScript</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/visual-studio-2015.html" title="使用Visual Studio 2015快速起步" class="translated-cn">Visual Studio 2015快速起步</a></li></ul></div></li></ul><!-- DROPDOWN BUTTON --><nav class="dropdown"><button aria-label="选择Angular版本" md-button="md-button" ng-click="appCtrl.toggleVersionMenu($event)" class="dropdown-button">Angular for TypeScript  <span class="icon icon-arrow-drop-down"></span></button><div ng-click="appCtrl.toggleVersionMenu($event)" ng-show="appCtrl.showMenu" class="overlay ng-hide"></div><!-- DROPDOWN MENU --><ul ng-class="appCtrl.showMenu ? 'is-visible' : ''" class="dropdown-menu"><li><a href="/docs/ts/latest/cookbook/dynamic-form-deprecated.html" md-button>Angular for TypeScript </a></li><li><a href="/docs/js/latest/cookbook/dynamic-form-deprecated.html" md-button>Angular for JavaScript </a></li><li><a href="/docs/dart/latest/cookbook/dynamic-form-deprecated.html" md-button>Angular for Dart </a></li></ul></nav></nav><script>// Could put in appCtrl but only needed here and clear here
(function scrollToSelectedLink() {
  var sideNav = document.getElementsByClassName('sidenav')[0];
  var link = sideNav.getElementsByClassName('is-selected')[0];
  if (link && link.offsetTop > window.innerHeight) {
    sideNav.scrollTop = link.offsetTop - (window.innerHeight / 2);
    //alert("offsetTop: " + link.offsetTop + " side-nav top is " + sideNav.scrollTop);
  }
})()</script><!-- template: public/_includes/_hero--><header class="hero background-sky"><h1 class="hero-title ">Dynamic Forms</h1><!--CLEAR FLOAT ELEMENTS--><div class="clear"></div></header><div class="banner"><p class="text-body translated-cn">Render dynamic forms with NgFormModel</p></div><article class="l-content-small grid-fluid docs-content"><script>function why(id, backTo) {
  var id = "#"+id;
  var el = document.querySelector(id);
  el.hidden=el.hidden=!el.hidden;

  if (el.hidden && backTo){
    // the next line is required to work around a bug in WebKit (Chrome / Safari)
    location.href = "#";
    location.href =  "#" + backTo;
  }
}</script><script>function verbose(isVerbose) {
  isVerbose = !! isVerbose;
  var el = document.querySelector('button.verbose.off');
  el.style.display = isVerbose ? 'block' : 'none';
  var el = document.querySelector('button.verbose.on');
  el.style.display = isVerbose ? 'none' : 'block';

  CCSStylesheetRuleStyle('main','.l-verbose-section', 'display',
    isVerbose ? 'block' : 'none');
}
</script><script>function CCSStylesheetRuleStyle(stylesheet, selectorText, style, value){
  /* returns the value of the element style of the rule in the stylesheet
  *  If no value is given, reads the value
  *  If value is given, the value is changed and returned
  *  If '' (empty string) is given, erases the value.
  *  The browser will apply the default one
  *
  * string stylesheet: part of the .css name to be recognized, e.g. 'default'
  * string selectorText: css selector, e.g. '#myId', '.myClass', 'thead td'
  * string style: camelCase element style, e.g. 'fontSize'
  * string value optional : the new value
  */
  var CCSstyle = undefined, rules, sheet;
  for(var m in document.styleSheets){
    sheet = document.styleSheets[m];
    if(sheet.href && sheet.href.indexOf(stylesheet) != -1){
    rules = sheet[document.all ? 'rules' : 'cssRules'];
    for(var n in rules){
      console.log(rules[n].selectorText);
      if(rules[n].selectorText == selectorText){
        CCSstyle = rules[n].style;
        break;
      }
    }
    break;
    }
  }
  if(value == undefined)
    return CCSstyle[style]
  else
    return CCSstyle[style] = value
}
</script><div class="alert is-important"><p>This cookbook is using the deprecated forms API, which is disabled as of RC5, thus this sample only works up to RC4. </p>
<p>We have created a new version of this cookbook using the new API <a href="/docs/ts/latest/cookbook/dynamic-form.html">here</a>. </p>
</div><p>We can&#39;t always justify the cost and time to build handcrafted forms, 
especially if we&#39;ll need a great number of them, they&#39;re similar to each other, and they change frequently 
to meet rapidly changing business and regulatory requirements.</p>
<p>It may be more economical to create the forms dynamically, based on metadata that describe the business object model.</p>
<p>In this cookbook we show how to use <code>ngFormModel</code> to dynamically render a simple form with different control types and validation.
It&#39;s a primitive start. 
It might evolve to support a much richer variety of questions, more graceful rendering, and superior user experience.
All such greatness has humble beginnings.</p>
<p>In our example we use a dynamic form to build an online application experience for heroes seeking employment.
The agency is constantly tinkering with the application process.
We can create the forms on the fly <em>without changing our application code</em>. </p>
<a id="toc"></a><h2 id="table-of-contents">Table of contents</h2>
<p>   <a href="#object-model">Question Model</a></p>
<p>   <a href="#form-component">Form Component</a></p>
<p>   <a href="#questionnaire-metadata">Questionnaire Metadata</a></p>
<p>   <a href="#dynamic-template">Dynamic Template</a></p>
<p><strong>See the <live-example name="cb-dynamic-form-deprecated"></live-example></strong>.</p>
<div class="l-main-section"></div><a id="object-model"></a><h2 id="question-model">Question Model</h2>
<p>The first step is to define an object model that can describe all scenarios needed by the form functionality.
The hero application process involves a form with a lot of questions. 
The &quot;question&quot; is the most fundamental object in the model.</p>
<p>We have created <code>QuestionBase</code> as the most fundamental question class.</p>
<div class="code-example"><header><h4>app/question-base.ts</h4></header><code-example language="ts" format="linenums">export class QuestionBase&lt;T&gt;{
  value: T;
  key: string;
  label: string;
  required: boolean;
  order: number;
  controlType: string;

  constructor(options: {
      value?: T,
      key?: string,
      label?: string,
      required?: boolean,
      order?: number,
      controlType?: string
    } = {}) {
    this.value = options.value;
    this.key = options.key || &#39;&#39;;
    this.label = options.label || &#39;&#39;;
    this.required = !!options.required;
    this.order = options.order === undefined ? 1 : options.order;
    this.controlType = options.controlType || &#39;&#39;;
  }
}
</code-example></div><p>From this base we derived two new classes in <code>TextboxQuestion</code> and <code>DropdownQuestion</code> that represent Textbox and Dropdown questions. 
The idea is that the form will be bound to specific question types and render the appropriate controls dynamically. </p>
<p><code>TextboxQuestion</code> supports multiple html5 types like text, email, url etc via the <code>type</code> property.</p>
<div class="code-example"><header><h4>app/question-textbox.ts</h4></header><code-example language="ts" format="">import { QuestionBase } from &#39;./question-base&#39;;

export class TextboxQuestion extends QuestionBase&lt;string&gt; {
  controlType = &#39;textbox&#39;;
  type: string;

  constructor(options: {} = {}) {
    super(options);
    this.type = options[&#39;type&#39;] || &#39;&#39;;
  }
}
</code-example></div><p><code>DropdownQuestion</code> presents a list of choices in a select box.</p>
<div class="code-example"><header><h4>app/question-dropdown.ts</h4></header><code-example language="ts" format="">import { QuestionBase } from &#39;./question-base&#39;;

export class DropdownQuestion extends QuestionBase&lt;string&gt; {
  controlType = &#39;dropdown&#39;;
  options: {key: string, value: string}[] = [];

  constructor(options: {} = {}) {
    super(options);
    this.options = options[&#39;options&#39;] || [];
  }
}
</code-example></div><p>Next we have defined <code>QuestionControlService</code>, a simple service for transforming our questions to an ngForm control group. 
In a nutshell, the control group consumes the metadata from the question model and allows us to specify default values and validation rules.</p>
<div class="code-example"><header><h4>app/question-control.service.ts</h4></header><code-example language="ts" format="">import { Injectable }   from &#39;@angular/core&#39;;
import { FormBuilder, Validators } from &#39;@angular/common&#39;;
import { QuestionBase } from &#39;./question-base&#39;;

@Injectable()
export class QuestionControlService {
  constructor(private fb: FormBuilder) { }

  toControlGroup(questions: QuestionBase&lt;any&gt;[] ) {
    let group = {};

    questions.forEach(question =&gt; {
      group[question.key] = question.required ? [question.value || &#39;&#39;, Validators.required] : [question.value || &#39;&#39;];
    });
    return this.fb.group(group);
  }
}
</code-example></div><a id="form-component"></a><h2 id="question-form-components">Question form components</h2>
<p>Now that we have defined the complete model we are ready to create components to represent the dynamic form.</p>
<p><code>DynamicFormComponent</code> is the entry point and the main container for the form. </p>
<code-tabs><code-pane language="html" name="dynamic-form.component.html" format="linenums">&lt;div&gt;
  &lt;form (ngSubmit)=&quot;onSubmit()&quot; [ngFormModel]=&quot;form&quot;&gt;

    &lt;div *ngFor=&quot;let question of questions&quot; class=&quot;form-row&quot;&gt;
      &lt;df-question [question]=&quot;question&quot; [form]=&quot;form&quot;&gt;&lt;/df-question&gt;
    &lt;/div&gt;

    &lt;div class=&quot;form-row&quot;&gt;
      &lt;button type=&quot;submit&quot; [disabled]=&quot;!form.valid&quot;&gt;Save&lt;/button&gt;
    &lt;/div&gt;
  &lt;/form&gt;

  &lt;div *ngIf=&quot;payLoad&quot; class=&quot;form-row&quot;&gt;
    &lt;strong&gt;Saved the following values&lt;/strong&gt;&lt;br&gt;{{payLoad}}
  &lt;/div&gt;
&lt;/div&gt;
</code-pane><code-pane language="ts" name="dynamic-form.component.ts" format="linenums">import { Component, Input, OnInit }  from &#39;@angular/core&#39;;
import { ControlGroup }              from &#39;@angular/common&#39;;

import { QuestionBase }                 from &#39;./question-base&#39;;
import { QuestionControlService }       from &#39;./question-control.service&#39;;
import { DynamicFormQuestionComponent } from &#39;./dynamic-form-question.component&#39;;

@Component({
  selector: &#39;dynamic-form&#39;,
  templateUrl: &#39;app/dynamic-form.component.html&#39;,
  directives: [DynamicFormQuestionComponent],
  providers:  [QuestionControlService]
})
export class DynamicFormComponent implements OnInit {

  @Input() questions: QuestionBase&lt;any&gt;[] = [];
  form: ControlGroup;
  payLoad = &#39;&#39;;

  constructor(private qcs: QuestionControlService) {  }

  ngOnInit() {
    this.form = this.qcs.toControlGroup(this.questions);
  }

  onSubmit() {
    this.payLoad = JSON.stringify(this.form.value);
  }
}
</code-pane></code-tabs><p>It presents a list of questions, each question bound to a <code>&lt;df-question&gt;</code> component element.
The <code>&lt;df-question&gt;</code> tag matches the <code>DynamicFormQuestionComponent</code>,
the component responsible for rendering the details of each <em>individual</em> question based on values in the data-bound question object.  </p>
<code-tabs><code-pane language="html" name="dynamic-form-question.component.html" format="linenums">&lt;div [ngFormModel]=&quot;form&quot;&gt;
  &lt;label [attr.for]=&quot;question.key&quot;&gt;{{question.label}}&lt;/label&gt;

  &lt;div [ngSwitch]=&quot;question.controlType&quot;&gt;

    &lt;input *ngSwitchCase=&quot;&#39;textbox&#39;&quot; [ngControl]=&quot;question.key&quot;
            [id]=&quot;question.key&quot; [type]=&quot;question.type&quot;&gt;

    &lt;select [id]=&quot;question.key&quot; *ngSwitchCase=&quot;&#39;dropdown&#39;&quot; [ngControl]=&quot;question.key&quot;&gt;
      &lt;option *ngFor=&quot;let opt of question.options&quot; [value]=&quot;opt.key&quot;&gt;{{opt.value}}&lt;/option&gt;
    &lt;/select&gt;

  &lt;/div&gt;

  &lt;div class=&quot;errorMessage&quot; *ngIf=&quot;!isValid&quot;&gt;{{question.label}} is required&lt;/div&gt;
&lt;/div&gt;
</code-pane><code-pane language="ts" name="dynamic-form-question.component.ts" format="linenums">import { Component, Input } from &#39;@angular/core&#39;;
import { ControlGroup }     from &#39;@angular/common&#39;;

import { QuestionBase }     from &#39;./question-base&#39;;

@Component({
  selector: &#39;df-question&#39;,
  templateUrl: &#39;app/dynamic-form-question.component.html&#39;
})
export class DynamicFormQuestionComponent {
  @Input() question: QuestionBase&lt;any&gt;;
  @Input() form: ControlGroup;
  get isValid() { return this.form.controls[this.question.key].valid; }
}
</code-pane></code-tabs><p>Notice this component can present any type of question in our model. 
We only have two types of questions at this point but we can imagine many more.
The <code>ngSwitch</code> determines which type of question to display.</p>
<p>In both components  we&#39;re relying on Angular&#39;s <strong>ngFormModel</strong> to connect the template HTML to the
underlying control objects, populated from the question model with display and validation rules.</p>
<a id="questionnaire-metadata"></a><h2 id="questionnaire-data">Questionnaire data</h2>
<p><code>DynamicFormComponent</code> expects the list of questions in the form of an array bound to  <code>@Input() questions</code>.</p>
<p> The set of questions we have defined for the job application is returned from the <code>QuestionService</code>. 
 In a real app we&#39;d retrieve these questions from storage.</p>
<p> The key point is that we control the hero job application questions entirely through the objects returned from <code>QuestionService</code>. 
 Questionnaire maintenance is a simple matter of adding, updating, and removing objects from the <code>questions</code> array.</p>
<div class="code-example"><header><h4>app/question.service.ts</h4></header><code-example language="ts" format="linenums">import { Injectable }       from &#39;@angular/core&#39;;

import { QuestionBase }     from &#39;./question-base&#39;;
import { TextboxQuestion }  from &#39;./question-textbox&#39;;
import { DropdownQuestion } from &#39;./question-dropdown&#39;;

@Injectable()
export class QuestionService {

  // Todo: get from a remote source of question metadata
  // Todo: make asynchronous
  getQuestions() {

    let questions: QuestionBase&lt;any&gt;[] = [

      new DropdownQuestion({
        key: &#39;brave&#39;,
        label: &#39;Bravery Rating&#39;,
        options: [
          {key: &#39;solid&#39;,  value: &#39;Solid&#39;},
          {key: &#39;great&#39;,  value: &#39;Great&#39;},
          {key: &#39;good&#39;,   value: &#39;Good&#39;},
          {key: &#39;unproven&#39;, value: &#39;Unproven&#39;}
        ],
        order: 3
      }),

      new TextboxQuestion({
        key: &#39;firstName&#39;,
        label: &#39;First name&#39;,
        value: &#39;Bombasto&#39;,
        required: true,
        order: 1
      }),

      new TextboxQuestion({
        key: &#39;emailAddress&#39;,
        label: &#39;Email&#39;,
        type: &#39;email&#39;,
        order: 2
      })
    ];

    return questions.sort((a, b) =&gt; a.order - b.order);
  }
}
</code-example></div><p>Finally, we display an instance of the form in the <code>AppComponent</code> shell.</p>
<div class="code-example"><header><h4>app.component.ts</h4></header><code-example language="ts" format="linenums">import { Component }       from &#39;@angular/core&#39;;

import { DynamicFormComponent }     from &#39;./dynamic-form.component&#39;;
import { QuestionService } from &#39;./question.service&#39;;

@Component({
  selector: &#39;my-app&#39;,
  template: `
    &lt;div&gt;
      &lt;h2&gt;Job Application for Heroes&lt;/h2&gt;
      &lt;dynamic-form [questions]=&quot;questions&quot;&gt;&lt;/dynamic-form&gt;
    &lt;/div&gt;
  `,
  directives: [DynamicFormComponent],
  providers:  [QuestionService]
})
export class AppComponent {
  questions: any[];

  constructor(service: QuestionService) {
    this.questions = service.getQuestions();
  }
}
</code-example></div><a id="dynamic-template"></a><h2 id="dynamic-template">Dynamic Template</h2>
<p>Although in this example we&#39;re modelling a job application for heroes, there are no references to any specific hero question 
outside the objects returned by <code>QuestionService</code>. </p>
<p>This is very important since it allows us to repurpose the components for any type of survey
as long as it&#39;s compatible with our <em>question</em> object model. 
The key is the dynamic data binding of metadata used to render the form 
without making any hardcoded assumptions about specific questions. 
In addition to control metadata, we are also adding validation dynamically.</p>
<p>The <em>Save</em> button is disabled until the form is in a valid state. 
When the form is valid, we can click <em>Save</em> and the app renders the current form values as JSON. 
This proves that any user input is bound back to the data model.
Saving and retrieving the data is an exercise for another time.</p>
<p>The final form looks like this:</p>
<figure class="image-display"><img src="/resources/images/cookbooks/dynamic-form/dynamic-form.png" alt="Dynamic-Form"></figure><p><a href="#top">Back to top</a></p></article><div class="main-footer"><nav class="background-midnight grid-fluid"><div class="c3 main-footer-branding"><div class="logo-inverse-large"></div></div><div class="c2"><h3 class="text-headline">RESOURCES</h3><h3 class="text-headline">资源库</h3><ul class="text-body"><!-- TODO: (ericjim) make a libraries page to showcase all angular libraries--><!--li <a href="/libraries.html">Libraries</a>--><li><a href="/about/">About</a></li><li><a href="/about/">关于</a></li><li><a href="/resources/">Books & Training</a></li><li><a href="/resources/">书籍与培训</a></li><li><a href="/resources/">Tools & Libraries</a></li><li><a href="/resources/">工具与库</a></li><li><a href="/resources/">Community</a></li><li><a href="/resources/">社区</a></li><li><a href="/presskit.html">Press Kit</a></li><li><a href="/presskit.html">宣传资料</a></li></ul></div><div class="c2"><h3 class="text-headline">HELP</h3><h3 class="text-headline">帮助</h3><ul class="text-body"><li><a href="http://stackoverflow.com/questions/tagged/angular2">Stack Overflow</a></li><li><a href="http://stackoverflow.com/questions/tagged/angular2">Stack Overflow</a></li><li><a href="https://gitter.im/angular/angular">Gitter</a></li><li><a href="https://gitter.im/angular/angular">Gitter</a></li><li><a href="https://groups.google.com/forum/#!forum/angular"> Google Group</a></li><li><a href="https://groups.google.com/forum/#!forum/angular"> Google Group</a></li><li><a href="https://github.com/angular/angular/issues"> Report Issues</a></li><li><a href="https://github.com/angular/angular/issues"> 报告问题</a></li><li><a class="footer-feedback" ng-click="appCtrl.openFeedback()" aria-label="Submit feedback on this page"> Site Feedback</a></li><li><a class="footer-feedback" ng-click="appCtrl.openFeedback()" aria-label="Submit feedback on this page"> 网站反馈</a></li></ul></div><div class="c2"><h3 class="text-headline">COMMUNITY</h3><h3 class="text-headline">社区</h3><ul class="text-body"><li><a href="/events.html">Events</a></li><li><a href="/events.html">会议</a></li><li><a href="http://www.meetup.com/topics/angularjs/">Meetups</a></li><li><a href="http://www.meetup.com/topics/angularjs/">Meetups</a></li><li><a href="https://twitter.com/angularjs"> Twitter</a></li><li><a href="https://twitter.com/angularjs"> Twitter</a></li><li><a href="https://github.com/angular/angular"> GitHub</a></li><li><a href="https://github.com/angular/angular"> GitHub</a></li><li><a href="/contribute.html"> Contribute</a></li><li><a href="/contribute.html"> 做贡献</a></li></ul></div><div class="c2"><h3 class="text-headline">LANGUAGES</h3><h3 class="text-headline">其它语种</h3><ul class="text-body"><li><a href="https://angular.io/" target="_blank">English</a></li></ul></div></nav><footer class="background-midnight"><small class="text-caption">Powered by Google ©2010-2016. Code licensed under an <a href="/license">MIT-style License</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.</small><a aria-label="View Style Guide" href="/docs/ts/latest/styleguide.html" title="Style Guide" class="styleguide-trigger"><span class="icon-favorite"></span></a><a aria-label="查看风格指南" href="/docs/ts/latest/styleguide.html" title="风格指南" md-button="md-button" class="styleguide-trigger text-snow translated-cn"><span class="icon-favorite"></span></a><p> <small class="text-caption">本网站由洛阳永欣维护 &nbsp;<a href="http://www.miitbeian.gov.cn/">豫ICP备16019859号-1</a></small></p></footer></div><!-- VENDORS --><script src="/resources/js/vendor/prettify.js"></script><script src="/resources/js/vendor/lang-basic.js"></script><script src="/resources/js/vendor/lang-dart.js"></script><script src="/resources/js/vendor/lodash.js"></script><script src="/resources/js/vendor/clipboard.min.js"></script><!-- Angular Material Dependencies --><script src="/resources/js/vendor/angular.min.js"></script><script src="/resources/js/vendor/angular-animate.min.js"></script><script src="/resources/js/vendor/angular-aria.min.js"></script><script src="/resources/js/vendor/angular-material.min.js"></script><!-- Firebase -->
<script src="/resources/js/vendor/firebase.js"></script>
<!-- AngularFire -->
<script src="/resources/js/vendor/angularfire.min.js"></script>
<!-- Angular.io Site JS --><script src="/translate/cn/translate.js"></script><script src="/resources/js/site.js"></script><script src="/resources/js/util.js"></script><script src="/resources/js/controllers/app-controller.js"></script><script src="/resources/js/controllers/resources-controller.js"></script><script src="/resources/js/directives/cheatsheet.js"></script><script src="/resources/js/directives/api-list.js"></script><script src="/resources/js/directives/bio.js"></script><script src="/resources/js/directives/bold.js"></script><script src="/resources/js/directives/announcement-bar.js"></script><script src="/resources/js/directives/code.js"></script><script src="/resources/js/directives/copy.js"></script><script src="/resources/js/directives/code-tabs.js"></script><script src="/resources/js/directives/code-pane.js"></script><script src="/resources/js/directives/code-example.js"></script><script src="/resources/js/directives/if-docs.js"></script><script src="/resources/js/directives/live-example.js"></script><script src="/resources/js/directives/ngio-ex-path.js"></script><script src="/resources/js/directives/scroll-y-offset-element.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-80456300-1', 'auto');
ga('send', 'pageview');</script></body></html>