<!DOCTYPE html><html lang="en" ng-app="angularIOApp" itemscope itemtype="http://schema.org/Framework"><!-- template: public/docs/_layout--><head><title>国际化 (i18n) - ts - COOKBOOK</title><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta name="keywords" content="Angular, 中文, 中文版, AngularJS, AngularDart, Javscript, Dart, Framework, JavaScript MVC, Google"/><meta name="robots" content="all"/><meta name="referrer" content="origin"/><meta name="viewport" id="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Angular"/><meta property="og:image" content="/resources/images/logos/standard/shield-large.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="184"/><meta property="og:image:height" content="200"/><meta property="og:description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta itemprop="name" content="Angular"/><meta itemprop="description" content="Angular是用于构建移动应用和桌面Web应用的开发平台"/><meta itemprop="image" content="/resources/images/logos/standard/shield-large.png"/><link rel="icon" type="image/x-icon" href="/resources/images/icons/favicon.ico"/><link rel="stylesheet" href="/resources/css/vendor/angular-material.min.css"/><link href="/resources/fonts/vendor/roboto.css" rel="stylesheet" type="text/css"/><link href="/resources/fonts/vendor/material-icons.css" rel="stylesheet"/><link rel="stylesheet" href="/resources/css/vendor/icomoon/style.css"/><link rel="stylesheet" href="/resources/css/vendor/animate.css"/><link rel="stylesheet" href="/resources/css/main.css"/><!-- MOBILE ICONS -->
<link rel="apple-touch-icon" sizes="57x57" href="/resources/images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/resources/images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/resources/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/resources/images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/resources/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/resources/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/resources/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/resources/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/resources/images/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/resources/images/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/resources/images/favicons/manifest.json"></head><body ng-controller="AppCtrl as appCtrl" class="l-offset-nav l-offset-side-nav"><nav data-swiftype-index="false" scroll-y-offset-element="scroll-y-offset-element" class="main-nav l-pinned-top l-layer-5"><h1><a href="/" md-button>Angular <sup>by Google</sup></a></h1><button aria-label="查看菜单" ng-click="appCtrl.toggleMainMenu($event)" md-button="md-button" class="main-nav-button main-nav-mobile-trigger l-right">网站菜单 <span class="icon icon-arrow-drop-down"></span></button><ul ng-class="appCtrl.showMainNav ? 'is-visible' : ''"><li class="l-left"><a class="main-nav-button" href="/features.html" md-button>特性</a></li><li class="l-left"><a class="main-nav-button" href="/docs/ts/latest/" md-button>文档</a></li><li class="l-left"><a class="main-nav-button" href="/events.html" md-button>会议</a></li><li class="l-left"><a href="http://community.angular.cn/" target="_blank" md-button="md-button" class="main-nav-button">社区</a></li><li class="l-left"><a class="main-nav-button" href="/translate/cn/home.html" md-button>关于中文版</a></li><li class="l-right"><a class="main-nav-button" href="/docs/ts/latest/quickstart.html" md-button>立即开始！</a></li><li class="l-right"><a ng-click="appCtrl.toggleSource($event)" href="href" class="main-nav-button md-button ng-cloak"><span>{{appCtrl.sourceVisible?'Hide English':'Show English'}}</span></a></li></ul></nav><!-- Include this file ONLY when current.path[2] is defined--><nav data-swiftype-index="false" ng-class="appCtrl.showDocsNav ? 'is-visible' : ''" class="sidenav l-pinned-left l-layer-4 l-offset-nav"><!-- SEARCH BAR--><header class="sidenav-search st-input-wrapper"><div class="st-input-inner"><label for="search-io" class="is-hidden">搜索文档</label><input type="text" placeholder="搜索文档..." class="st-default-search-input"/></div><button aria-label="View Docs Menu" ng-click="appCtrl.toggleDocsMenu($event)" md-button="md-button" class="mobile-trigger button">文档 <span class="icon icon-arrow-drop-down"></span></button></header><ul class="sidenav-links"><li class="sidenav-section no-border"><a href="/docs/ts/latest/" class="nav-title">文档首页</a></li><!-- CORE DOCUMENTATION--><li class="sidenav-section-divider"><h3>核心文档</h3></li><li class="sidenav-section"><a href="/docs/ts/latest/quickstart.html" title="快速起步" class="nav-title ">快速起步</a></li><li class="sidenav-section"><a href="/docs/ts/latest/cli-quickstart.html" title="使用 CLI 快速构建 Angular 应用" class="nav-title ">CLI 快速起步</a></li><li class="sidenav-section"><a href="/docs/ts/latest/guide/" title="如何阅读本文档" class="nav-title is-parent ">开发指南<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-ordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/guide/" title="如何阅读本文档">1. 概览</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/setup.html" title="安装 Angular 《快速起步》种子，更快更有效地在本地开发应用">2. 开发环境</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/learning-angular.html" title="Angular 初学者的推荐学习路径">3. 学习 Angular</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/architecture.html" title="Angular 应用的基本构造块">4. 架构</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/appmodule.html" title="如何在根 &quot;AppModule&quot; 中构建和启动应用。">5. 根模块</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/displaying-data.html" title="属性绑定机制把数据显示到用户界面上。">6. 显示数据</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/user-input.html" title="用户输入触发 DOM 事件。我们通过事件绑定来监听它们，把更新过的数据导入回我们的组件和 model。">7. 用户输入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/forms.html" title="表单创建一个有机、有效、引人注目的数据输入体验。Angular 表单协调一组数据绑定控件，跟踪变更，验证输入的有效性，并且显示错误信息。">8. 表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/dependency-injection.html" title="Angular 的依赖注入系统能够即时地创建和交付所依赖的服务。">9. 依赖注入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/template-syntax.html" title="学习如何写模板来显示数据，以及在数据绑定的帮助下响应用户事件。">10. 模板语法</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/cheatsheet.html" title="速查表">11. 速查表</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/style-guide.html" title="如何写 Angular 风格的程序">12. 风格指南</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/glossary.html" title="Angular 中最重要的词汇的简要定义">13. 词汇表</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/change-log.html" title="最新文档更新历史记录。">14. 更新记录</a></li></ul></div></li><li class="sidenav-section no-border"><a href="/docs/ts/latest/api/" title="API 参考手册" class="nav-title ">API参考手册</a></li><!-- ADVANCED DOCUMENATION--><li class="sidenav-section-divider"><h3>附加文档</h3></li><li class="sidenav-section"><a href="/docs/ts/latest/tutorial/" title="英雄指南教程带我们一步步使用 TypeScript 创建 Angular 应用。" class="nav-title is-parent ">教程<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-ordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/" title="英雄指南教程带我们一步步使用 TypeScript 创建 Angular 应用。">1. 简介</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt1.html" title="构建一个简单的英雄编辑器">2. 英雄编辑器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt2.html" title="构建一个主从结构的页面，用于展现英雄列表">3. 主从结构</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt3.html" title="把主从结构的页面重构成多个组件">4. 多个组件</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt4.html" title="创建一个可复用的服务来调用英雄的数据">5. 服务</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt5.html" title="添加 Angular 组件路由，并且学习在视图之间导航">6. 路由</a></li><li class="nav-list-item "><a href="/docs/ts/latest/tutorial/toh-pt6.html" title="把服务和组件改为用 Angular 的 HTTP 服务实现">7. HTTP</a></li></ul></div></li><li class="sidenav-section"><a href="/docs/ts/latest/guide/animations.html" title="Angular 动画系统指南。" class="nav-title is-parent ">高级文档<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-unordered-lists is-hidden"><ul><li class="nav-list-item "><a href="/docs/ts/latest/guide/animations.html" title="Angular 动画系统指南。" class="translated-cn">动画</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/attribute-directives.html" title="属性型指令把行为添加到现有元素上。" class="translated-cn">属性型指令</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/browser-support.html" title="浏览器支持与填充 (Polyfill) 指南" class="translated-cn">浏览器支持</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/component-styles.html" title="学习如何给组件应用 CSS 样式。" class="translated-cn">组件样式</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/deployment.html" title="如何部署Angular应用。" class="translated-cn">部署</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/hierarchical-dependency-injection.html" title="Angular 的多级依赖注入系统支持与组件树并行的嵌套式注入器。" class="translated-cn">多级注入器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/reactive-forms.html" title="使用FormBuilder、组合数组创建响应式表单。" class="translated-cn">响应式表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/server-communication.html" title="通过 HTTP 客户端与远程服务器对话。" class="translated-cn">HTTP 客户端</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/lifecycle-hooks.html" title="Angular 调用指令和组件的生命周期钩子函数，包括它的创建、变更和销毁时。" class="translated-cn">生命周期钩子</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/ngmodule.html" title="用 @NgModule 定义应用中的模块" class="translated-cn">Angular模块 (NgModule)</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/npm-packages.html" title="推荐的 npm 包以及如何指定所依赖的包" class="translated-cn">npm 包</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/pipes.html" title="管道可以在模板中转换显示的内容。" class="translated-cn">管道</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/router.html" title="揭示如何通过 Angular 路由进行基本的屏幕导航。" class="translated-cn">路由与导航</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/security.html" title="开发内容安全的 Angular 应用。" class="translated-cn">安全</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/setup-systemjs-anatomy.html" title="解析 SystemJS 本地开发环境" class="translated-cn">搭建剖析</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/structural-directives.html" title="Angular 有一个强力的模板引擎，它能让你轻松维护元素的DOM树结构。" class="translated-cn">结构型指令</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/testing.html" title="Angular 应用的测试技术与实践。" class="translated-cn">测试</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/typescript-configuration.html" title="Angular 开发者的 TypeScript 配置" class="translated-cn">TypeScript 配置</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/upgrade.html" title="AngularJS 应用可以逐步升级到 Angular。" class="translated-cn">从 AngularJS 升级</a></li><li class="nav-list-item "><a href="/docs/ts/latest/guide/webpack.html" title="使用基于 Webpack 的工具创建 Angular 应用" class="translated-cn">Webpack 简介</a></li></ul></div></li><li class="sidenav-section"><a href="/docs/ts/latest/cookbook/" title="一组常见 Angular 应用场景的“烹饪宝典”" class="nav-title is-parent is-selected">烹饪宝典<img src="/resources/images/icons/ic_keyboard_arrow_down_black_24px.svg" class="inline-arrow-down-svg"/></a><div class="nav-unordered-lists"><ul><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/" title="一组常见 Angular 应用场景的“烹饪宝典”" class="translated-cn">概览</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/aot-compiler.html" title="学习如何使用预编译器" class="translated-cn">预 (AoT) 编译器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ajs-quick-reference.html" title="学习如何把 AngularJS 中的概念和技术对应到 Angular 中" class="translated-cn">从 AngularJS 到 Angular</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/component-communication.html" title="在不同的指令和组件之间共享信息" class="translated-cn">组件通讯</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/component-relative-paths.html" title="为组件的模板和样式指定相对于组件的路径" class="translated-cn">相对于组件的路径</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dependency-injection.html" title="依赖注入技术" class="translated-cn">依赖注入</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dynamic-component-loader.html" title="如何动态加载组件" class="translated-cn">动态组件加载器</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/dynamic-form.html" title="用 FormGroup 渲染动态表单" class="translated-cn">动态表单</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/form-validation.html" title="验证用户在表单中的输入" class="translated-cn">表单验证</a></li><li class="nav-list-item is-selected"><a href="/docs/ts/latest/cookbook/i18n.html" title="把应用的模板文本翻译成多种语言。" class="translated-cn">国际化 (i18n)</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ngmodule-faq.html" title="对 @NgModule 常见问题的解答" class="translated-cn">Angular 模块常见问题</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/set-document-title.html" title="使用 Title 服务来设置文档标题或窗口标题" class="translated-cn">设置文档标题</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/ts-to-js.html" title="把 Angular 的 TypeScript 范例转换为 ES6 和 ES5 JavaScript." class="translated-cn">从 TypeScript 到 JavaScript</a></li><li class="nav-list-item "><a href="/docs/ts/latest/cookbook/visual-studio-2015.html" title="使用 Visual Studio 2015 快速起步" class="translated-cn">Visual Studio 2015 快速起步</a></li></ul></div></li></ul><nav class="dropdown"><button aria-label="选择Angular版本" md-button="md-button" ng-click="appCtrl.toggleVersionMenu($event)" class="dropdown-button">Angular for TypeScript  <span class="icon icon-arrow-drop-down"></span></button><div ng-click="appCtrl.toggleVersionMenu($event)" ng-show="appCtrl.showMenu" class="overlay ng-hide"></div><ul ng-class="appCtrl.showMenu ? 'is-visible' : ''" class="dropdown-menu"><li><a href="/docs/ts/latest/cookbook/i18n.html" md-button>Angular for TypeScript </a></li><li><a href="/docs/js/latest/cookbook/i18n.html" md-button>Angular for JavaScript </a></li><li><a href="/docs/dart/latest/cookbook/i18n.html" md-button>Angular for Dart </a></li></ul></nav></nav><script>// Could put in appCtrl but only needed here and clear here
(function scrollToSelectedLink() {
  var sideNav = document.getElementsByClassName('sidenav')[0];
  var link = sideNav.getElementsByClassName('is-selected')[0];
  if (link && link.offsetTop > window.innerHeight) {
    sideNav.scrollTop = link.offsetTop - (window.innerHeight / 2);
    //alert("offsetTop: " + link.offsetTop + " side-nav top is " + sideNav.scrollTop);
  }
})()</script><header class="hero background-sky"><h1 class="hero-title ">国际化 (i18n) </h1><div class="clear"></div></header><div class="banner"><p class="text-body translated-cn">把应用的模板文本翻译成多种语言。</p></div><article class="l-content-small grid-fluid docs-content"><script>function why(id, backTo) {
  var id = "#"+id;
  var el = document.querySelector(id);
  el.hidden=el.hidden=!el.hidden;

  if (el.hidden && backTo){
    // the next line is required to work around a bug in WebKit (Chrome / Safari)
    location.href = "#";
    location.href =  "#" + backTo;
  }
}</script><script>function verbose(isVerbose) {
  isVerbose = !! isVerbose;
  var el = document.querySelector('button.verbose.off');
  el.style.display = isVerbose ? 'block' : 'none';
  var el = document.querySelector('button.verbose.on');
  el.style.display = isVerbose ? 'none' : 'block';

  CCSStylesheetRuleStyle('main','.l-verbose-section', 'display',
    isVerbose ? 'block' : 'none');
}
</script><script>function CCSStylesheetRuleStyle(stylesheet, selectorText, style, value){
  /* returns the value of the element style of the rule in the stylesheet
  *  If no value is given, reads the value
  *  If value is given, the value is changed and returned
  *  If '' (empty string) is given, erases the value.
  *  The browser will apply the default one
  *
  * string stylesheet: part of the .css name to be recognized, e.g. 'default'
  * string selectorText: css selector, e.g. '#myId', '.myClass', 'thead td'
  * string style: camelCase element style, e.g. 'fontSize'
  * string value optional : the new value
  */
  var CCSstyle = undefined, rules, sheet;
  for(var m in document.styleSheets){
    sheet = document.styleSheets[m];
    if(sheet.href && sheet.href.indexOf(stylesheet) != -1){
    rules = sheet[document.all ? 'rules' : 'cssRules'];
    for(var n in rules){
      console.log(rules[n].selectorText);
      if(rules[n].selectorText == selectorText){
        CCSstyle = rules[n].style;
        break;
      }
    }
    break;
    }
  }
  if(value == undefined)
    return CCSstyle[style]
  else
    return CCSstyle[style] = value
}
</script><a id="top"></a><p>Angular&#39;s <em>internationalization</em> (<em>i18n</em>) tools help make your app available in multiple languages.</p>
<p>Angular的<em>国际化</em>（<em>i18n</em>）工具可以帮助我们使用多个语言发布应用。</p>
<h1 id="contents">Contents</h1>
<h1 id="-">目录</h1>
<ul>
<li><p><a href="#angular-i18n">Angular and i18n template translation</a></p>
<p><a href="#angular-i18n">Angular和i18n模板翻译</a></p>
</li>
<li><p><a href="#i18n-attribute">Mark text with the <em>i18n</em> attribute</a></p>
<p><a href="#i18n-attribute">把文本用<em>i18n</em>属性标记出来</a></p>
<ul>
<li><p><a href="#help-translator">Help the translator with a description and intent</a></p>
<p><a href="#help-translator">通过添加描述和意图来帮助翻译者</a></p>
</li>
<li><p><a href="#no-element">Translate text without creating an element</a></p>
<p><a href="#no-element">在不创建元素的情况下翻译文本</a></p>
</li>
</ul>
</li>
<li><p><a href="#translate-attributes">Add <em>i18n-...</em> translation attributes</a></p>
<p>  <a href="#translate-attributes">添加 <em>i18n-...</em> 翻译属性</a></p>
</li>
<li><p><a href="#cardinality">Handle singular and plural</a></p>
<p>  <a href="#cardinality">处理单数和复数</a></p>
</li>
<li><p><a href="#select">Select among alternative texts</a></p>
<p>  <a href="#select">在候选内容中做出选择</a></p>
</li>
<li><p><a href="#ng-xi18n">Create a translation source file with the <strong><em>ng-xi18n</em> extraction tool</strong></a></p>
<p><a href="#ng-xi18n">使用<em>ng-xi18n</em>工具创建翻译源文件</a></p>
<ul>
<li><p><a href="#other-formats">Other translation formats</a></p>
<p><a href="#other-formats">其它翻译格式</a></p>
</li>
<li><p><a href="#ng-xi18n-options">Other options</a></p>
<p><a href="#ng-xi18n-options">其它选项</a></p>
</li>
<li><p><a href="#npm-i18n-script">Add an <code>npm</code> script for convenience</a></p>
<p><a href="#npm-i18n-script">添加<code>npm</code>脚本来便捷使用</a></p>
</li>
</ul>
</li>
<li><p><a href="#translate">Translate text messages</a></p>
<p><a href="#translate">翻译文本信息</a></p>
<ul>
<li><p><a href="#localization-folder">Create a localization folder</a></p>
<p><a href="#localization-folder">创建本地化文件夹</a></p>
</li>
<li><p><a href="#translate-text-nodes">Translate text nodes</a></p>
<p><a href="#translate-text-nodes">翻译文本节点</a></p>
</li>
</ul>
</li>
<li><p><a href="#translate-plural-select">Translate <code>plural</code> and <code>select</code></a></p>
<p><a href="#translate-plural-select">翻译复数形式<code>plural</code>及选择项<code>select</code></a></p>
<ul>
<li><p><a href="#translate-plural">Translate <code>plural</code></a></p>
<p><a href="#translate-plural">翻译复数形式<code>plural</code></a></p>
</li>
<li><p><a href="#translate-select">Translate <code>select</code></a></p>
<p><a href="#translate-select">翻译<code>select</code></a></p>
</li>
<li><p><a href="#app-pre-translation">The app before translation</a></p>
<p><a href="#app-pre-translation">翻译之前的应用</a></p>
</li>
</ul>
</li>
<li><p><a href="#merge">Merge the completed translation file into the app</a></p>
<p>  <a href="#merge">把翻译完成的文件合并到应用中</a></p>
<ul>
<li><p><a href="#jit">Merge with the JIT compiler</a></p>
<p><a href="#jit">合并到JIT编译器中</a></p>
</li>
<li><p><a href="#text-plugin">SystemJS text plugin</a></p>
<p><a href="#text-plugin">SystemJS的文本插件</a></p>
</li>
<li><p><a href="#create-translation-providers">Create translation providers</a></p>
<p><a href="#create-translation-providers">创建翻译提供商</a></p>
</li>
<li><p><a href="#bootstrap-the-app">Bootstrap the app with translation providers</a></p>
<p><a href="#bootstrap-the-app">通过翻译提供商引导应用</a></p>
</li>
<li><p><a href="#aot">Internationalization with the AOT compiler</a></p>
<p>  <a href="#aot">AOT编译器的国际化</a></p>
</li>
</ul>
</li>
<li><p><a href="#maintenance">Translation file maintenance and <em>id</em> changes</a></p>
<p>  <a href="#maintenance">翻译文件的维护和 <em>id</em> 变更</a></p>
</li>
</ul>
<p>Try this <live-example name="cb-i18n" title="i18n Example in Spanish">live example</live-example>
of a JIT-compiled app, translated into Spanish.</p>
<p><strong>试试</strong> 这个翻译为西班牙语版JiT编译应用的<live-example name="cb-i18n">在线例子</live-example>。</p>
<a id="angular-i18n"></a><div class="l-main-section"></div><h2 id="angular-and-_i18n_-template-translation">Angular and <em>i18n</em> template translation</h2>
<h2 id="angular-_i18n_-">Angular和<em>i18n</em>模板翻译</h2>
<p>Application internationalization is a challenging, many-faceted effort that
takes dedication and enduring commitment.
Angular&#39;s <em>i18n</em> internationalization facilities can help.</p>
<p>应用程序国际化很具有挑战性，多方面的努力，需要持久的奉献和决心。
Angular的<em>i18n</em>国际化工具可以帮助你。</p>
<p>This page describes the <em>i18n</em> tools available to assist translation of component template text
into multiple languages.</p>
<p>本章描述了一些<em>i18n</em>工具，它们可以帮你把组件模板文本翻译成多种语言。</p>
<div class="l-sub-section"><p>Practitioners of <em>internationalization</em> refer to a translatable text as a &quot;<em>message</em>&quot;.
This page uses the words &quot;<em>text</em>&quot; and &quot;<em>message</em>&quot; interchangably and in the combination, &quot;<em>text message</em>&quot;.</p>
<p><strong>国际化</strong>工作者通常将一个可翻译的文本叫作“信息”。
本章使用了“文本”和“信息”，它们可以互换，也可以组合“文本信息”。</p>
</div><p>The <em>i18n</em> template translation process has four phases:</p>
<p><em>i18n</em>模板翻译流程有四个阶段：  </p>
<ol>
<li><p>Mark static text messages in your component templates for translation.</p>
<p>在组件模板中标记需要翻译的静态文本信息。</p>
</li>
<li><p>An angular <em>i18n</em> tool extracts the marked messages into an industry standard translation source file.</p>
<p>Angular的<em>i18n</em>工具将标记的信息提取到一个行业标准的翻译源文件。</p>
</li>
<li><p>A translator edits that file, translating the extracted text messages into the target language,
and returns the file to you.</p>
<p>翻译人员编辑该文件，翻译提取出来的文本信息到目标语言，并将该文件还给你。</p>
</li>
<li><p>The Angular compiler imports the completed translation files,
replaces the original messages with translated text, and generates a new version of the application
in the target language.</p>
<p>Angular编译器导入完成翻译的文件，使用翻译的文本替换原始信息，并生成新的目标语言版本的应用程序。</p>
</li>
</ol>
<p>You need to build and deploy a separate version of the application for each supported language.</p>
<p>你可以为每种支持的语言构建和部署单独的应用程序版本。</p>
<a id="i18n-attribute"></a><div class="l-main-section"></div><h2 id="mark-text-with-the-_i18n_-attribute">Mark text with the <em>i18n</em> attribute</h2>
<h2 id="-_i18n_-">使用<em>i18n</em>属性标记文本</h2>
<p>The Angular <code>i18n</code> attribute is a marker for translatable content.
Place it on every element tag whose fixed text should be translated.</p>
<p>Angular的<code>i18n</code>属性是可翻译内容的标记。
将它放到每个固定文本需要翻译的元素标签中。</p>
<div class="alert is-helpful"><p><code>i18n</code> is not an Angular <em>directive</em>.
It&#39;s a custom <em>attribute</em>, recognized by Angular tools and compilers.
After translation, the compiler removes it.</p>
<p><code>i18n</code>不是Angular指令。
它是一个自定义<strong>属性</strong>，Angular工具和编译器认识它。
它将在完成翻译<strong>之后</strong>，被编译器移除。</p>
</div><p>In the accompanying sample, an <code>&lt;h1&gt;</code> tag displays a simple English language greeting
that you translate into Spanish:</p>
<p>在例子中，<code>&lt;h1&gt;</code>标签显示了一句简单的英文问候语，它将被翻译为西班牙语：</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;h1&gt;Hello i18n!&lt;/h1&gt;
</code-example></div><p>Add the <code>i18n</code> attribute to the tag to mark it for translation.</p>
<p>添加<code>i18n</code>属性到该标签上，把它标记为需要翻译的文本。</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;h1 i18n&gt;Hello i18n!&lt;/h1&gt;
</code-example></div><a id="help-translator"></a><h3 id="help-the-translator-with-a-_description_-and-_intent_">Help the translator with a <em>description</em> and <em>intent</em></h3>
<h3 id="-">用描述和意图来帮助翻译人员</h3>
<p>In order to translate it accurately, the translator may
need a description of the message.
Assign a description to the i18n attribute:</p>
<p>翻译人员可能需要待翻译文本的描述才能翻译准确。
为i18n属性添加描述：</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;h1 i18n=&quot;An introduction header for this sample&quot;&gt;Hello i18n!&lt;/h1&gt;
</code-example></div><p>In order to deliver a correct translation, the translator may need to
know your <em>intent</em>&mdash;the true <em>meaning</em> of the text
within <em>this particular</em> application context.
In front of the description, add some contextual meaning to the assigned string,
separating it from the description with the <code>|</code> character (<code>&lt;meaning&gt;|&lt;description&gt;</code>):</p>
<p>为了给出正确的翻译，翻译者需要知道你这段文本在特定情境下的 <em>真实意图</em>。
在描述的前面，为指定的字符串添加一些上下文含义，用<code>|</code>将其与描述文字隔开(<code>&lt;意图&gt;|&lt;描述&gt;</code>)。</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;h1 i18n=&quot;User welcome|An introduction header for this sample&quot;&gt;Hello i18n!&lt;/h1&gt;
</code-example></div><p>While all appearances of a message with the <em>same</em> meaning have the <em>same</em> translation,
a message with <em>a variety of possible meanings</em> could have different translations.
The Angular extraction tool preserves both the <em>meaning</em> and the <em>description</em> in the translation source file
to facilitiate contextually-specific translations.</p>
<p>如果所有地方出现的文本具有<strong>相同</strong>含义时，它们应该有<strong>相同</strong>的翻译，
但是如果在某些地方它具有<strong>不同含义</strong>，那么它应该有不同的翻译。
Angular的提取工具在翻译源文件中保留<strong>含义</strong>和<strong>描述</strong>，以支持符合特定上下文的翻译。</p>
<a id="no-element"></a><h3 id="translate-text-without-creating-an-element">Translate text without creating an element</h3>
<p>Suppose there is a stretch of text that you&#39;d like to translate.
You could wrap it in a <code>&lt;span&gt;</code> tag but for some reason (CSS comes to mind)
you don&#39;t want to create a new DOM element merely to facilitate translation.</p>
<p>Here are two techniques to try.</p>
<p>(1) Wrap the text in an <code>&lt;ng-container&gt;</code> element. The <code>&lt;ng-container&gt;</code> is never renderered:</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;ng-container i18n&gt;I don&#39;t output any element&lt;/ng-container&gt;
</code-example></div><p>(2) Wrap the text in a pair of HTML comments:</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;!--i18n: optional meaning|optional description --&gt;
I don&#39;t output any element either
&lt;!--/i18n--&gt;
</code-example></div><div class="l-main-section"></div><a id="translate-attributes"></a><h2 id="add-_i18n-_-translation-attributes">Add <em>i18n-...</em> translation attributes</h2>
<p>You&#39;ve added an image to your template. You care about accessibility too so you add a <code>title</code> attribute:</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;img [src]=&quot;logo&quot; title=&quot;Angular logo&quot;&gt;
</code-example></div><p>The <code>title</code> attribute needs to be translated.
Angular i18n support has more translation attributes in the form,<code>i18n-x</code>, where <code>x</code> is the
name of the attribute to translate.</p>
<p>To translate the <code>title</code> on the <code>img</code> tag from the previous example, write:</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;img [src]=&quot;logo&quot; i18n-title title=&quot;Angular logo&quot; /&gt;
</code-example></div><p>You can also assign a meaning and a description with the <code>i18n-x=&quot;&lt;meaning&gt;|&lt;description&gt;&quot;</code> syntax.</p>
<div class="l-main-section"></div><a id="cardinality"></a><h2 id="handle-singular-and-plural">Handle singular and plural</h2>
<p>Different languages have different pluralization rules.</p>
<p>Suppose your application says something about a collection of wolves.
In English, depending upon the number of wolves, you could display &quot;no wolves&quot;, &quot;one wolf&quot;, &quot;two wolves&quot;, or &quot;a wolf pack&quot;.
Other languages might express the <em>cardinality</em> differently.</p>
<p>Here&#39;s how you could mark up the component template to display the phrase appropriate to the number of wolves:</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;span i18n&gt;{wolves, plural, =0 {no wolves} =1 {one wolf} =2 {two wolves} other {a wolf pack}}&lt;/span&gt;
</code-example></div><ul>
<li>The first parameter is the key. It is bound to the component property (<code>wolves</code>)
that determines the number of wolves.</li>
<li>The second parameter identifies this as a <code>plural</code> translation type.</li>
<li>The third parameter defines a pluralization pattern consisting of pluralization
categories and their matching values.</li>
</ul>
<p>Pluralization categories include:</p>
<ul>
<li>=0</li>
<li>=1</li>
<li>=5</li>
<li>few</li>
<li>other</li>
</ul>
<p>Put the default <em>English</em> translation in braces (<code>{}</code>) next to the pluralization category.</p>
<ul>
<li><p>When you&#39;re talking about one wolf, you could write <code>=1 {one wolf}</code>.</p>
</li>
<li><p>For zero wolves, you could write <code>=0 {no wolves}</code>.</p>
</li>
<li>For two wolves, you could write <code>=2 {two wolves}</code>.</li>
</ul>
<p>You could keep this up for three, four, and every other number of wolves.
Or you could specify the <strong><code>other</code></strong> category as a catch-all for any unmatched cardinality
and write something like: <code>other {a wolf pack}</code>.</p>
<div class="l-sub-section"><p>This syntax conforms to the
<a href="http://userguide.icu-project.org/formatparse/messages" target="_blank" title="ICU Message Format">ICU Message Format</a>
that derives from the
<a href="http://cldr.unicode.org/" target="_blank" title="CLDR">Common Locale Data Repository (CLDR)</a>,
which specifies the
<a href="http://unicode.org/reports/tr35/tr35-numbers.html#Language_Plural_Rules" target="_blank" title="Pluralization Rules">pluralization rules</a>.</p>
</div><a id="select"></a><h2 id="select-among-alternative-texts">Select among alternative texts</h2>
<p>The application displays different text depending upon whether the hero is male or female.
These text alternatives require translation too.</p>
<p>You can handle this with a <code>select</code> translation.
A <code>select</code> also follows the
<a href="http://userguide.icu-project.org/formatparse/messages" target="_blank" title="ICU Message Format">ICU message syntax</a>.
You choose among alternative translation based on a string value instead of a number.</p>
<p>The following format message in the component template binds to the component&#39;s <code>gender</code>
property, which outputs either an &quot;m&quot; or an &quot;f&quot;.
The message maps those values to the appropriate translation:</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;span i18n&gt;The hero is {gender, select, m {male} f {female}}&lt;/span&gt;
</code-example></div><a id="ng-xi18n"></a><div class="l-main-section"></div><h2 id="create-a-translation-source-file-with-the-_ng-xi18n_-tool">Create a translation source file with the <em>ng-xi18n</em> tool</h2>
<h2 id="-_ng-xi18n_-">使用<em>ng-xi18n</em>工具创建翻译源文件</h2>
<p>Use the <strong><em>ng-xi18n</em> extraction tool</strong> to extract the <code>i18n</code>-marked texts 
into a translation source file in an industry standard format.</p>
<p>使用<code>ng-xi18n</code>提取工具来将<code>i18n</code>标记的文本提取到一个符合行业标准格式的翻译源文件。</p>
<p>This is an Angular CLI tool in the <code>@angular/compiler-cli</code> npm package.
If you haven&#39;t already installed the CLI and its <code>platform-server</code> peer dependency, do so now:</p>
<p>它是在<code>@angular/compiler-cli</code> npm包中的一个Angular CLI工具。
如果你还没有安装这个CLI和它的 <code>platform-server</code>，安装它们：</p>
<code-example language="sh" class="code-shell">npm install @angular/compiler-cli @angular/platform-server --save
</code-example><p>Open a terminal window at the root of the application project and enter the <code>ng-xi18n</code> command:</p>
<p>在应用的项目根目录打开一个终端窗口，并输入<code>ng-xi18n</code>命令：</p>
<code-example language="sh" class="code-shell">./node_modules/.bin/ng-xi18n
</code-example><div class="l-sub-section"><p>Windows users may have to quote the command like this: <code>&quot;./node_modules/.bin/ng-xi18n&quot;</code></p>
</div><p>By default, the tool generates a translation file named <strong><code>messages.xlf</code></strong> in the
<a href="https://en.wikipedia.org/wiki/XLIFF" target="_blank">XML Localisation Interchange File Format (XLIFF, version 1.2)</a>.</p>
<p>工具默认生成一个名为<strong><code>messages.xlf</code></strong>的翻译文件，格式为<a href="https://en.wikipedia.org/wiki/XLIFF" target="_blank">XML本土化互换文件格式(XLIFF, version 1.2)</a>。</p>
<a id="other-formats"></a><h3 id="other-translation-formats">Other translation formats</h3>
<p>You can generate a file named <strong><code>messages.xmb</code></strong> in the
<a href="http://cldr.unicode.org/development/development-process/design-proposals/xmb" target="_blank">XML Message Bundle (XMB)</a> format
by adding the <code>--i18nFormat=xmb</code> flag.</p>
<code-example language="sh" class="code-shell">./node_modules/.bin/ng-xi18n  --i18nFormat=xmb
</code-example><p>This sample sticks with the <em>XLIFF</em> format.</p>
<a id="ng-xi18n-options"></a><h3 id="other-options">Other options</h3>
<p>You may have to specify additional options.
For example, if the <code>tsconfig.json</code> TypeScript configuration
file is located somewhere other than in the root folder,
you must identify the path to it with the <code>-p</code> option:</p>
<code-example language="sh" class="code-shell">./node_modules/.bin/ng-xi18n -p path/to/tsconfig.json
./node_modules/.bin/ng-xi18n  --i18nFormat=xmb -p path/to/tsconfig.json

</code-example><a id="npm-i18n-script"></a><h3 id="add-an-_npm_-script-for-convenience">Add an <em>npm</em> script for convenience</h3>
<p>Consider adding a convenience shortcut to the <code>scripts</code> section of the <code>package.json</code>
to make the command easier to remember and run:</p>
<code-example format="." language="sh">"scripts": {
  "i18n": "ng-xi18n",
  ...
}</code-example><p>Now you can issue command variations such as these:</p>
<code-example language="sh" class="code-shell">npm run i18n
npm run i18n -- -p path/to/tsconfig.json
npm run i18n -- --i18nFormat=xmb -p path/to/tsconfig.json</code-example><p>Note the <code>--</code> flag before the options.
It tells <em>npm</em> to pass every flag thereafter to <code>ng-xi18n</code>.</p>
<a id="translate"></a><div class="l-main-section"></div><h2 id="translate-text-messages">Translate text messages</h2>
<h2 id="-">翻译文本信息</h2>
<p>The <code>ng-xi18n</code> command generates a translation source file 
in the project root folder named <code>messages.xlf</code>.
The next step is to translate the English language template
text into the specific language translation
files. The cookbook sample creates a Spanish translation file.</p>
<p><code>ng-xi18n</code>命令在项目根目录生成一个名为<code>messages.xlf</code>的翻译源文件。
下一步是将英文模板文本翻译到目标语言的翻译文件。
本烹饪书创建了一个西班牙语翻译文件。</p>
<a id="localization-folder"></a><h3 id="create-a-localization-folder">Create a localization folder</h3>
<h3 id="-">新建一个本土化目录</h3>
<p>You will probably translate into more than one other language so it&#39;s a good idea
for the project structure to reflect your entire internationalization effort.</p>
<p>你很有可能翻译到更多其他语言，所以为全部国际化工作做适当的调整项目目录结构是理所当然的。</p>
<p>One approach is to dedicate a folder to localization and store related assets ,
such as internationalization files, there.</p>
<p>其中一种方法是为本土化和相关资源（比如国际化文件）创建一个专门的目录。</p>
<div class="l-sub-section"><p>Localization and internationalization are
<a href="https://en.wikipedia.org/wiki/Internationalization_and_localization" target="_blank">different but closely related terms</a>.</p>
<p>本土化和国际化是<a href="https://en.wikipedia.org/wiki/Internationalization_and_localization" target="_blank">不同但是很相近的概念</a>。</p>
</div><p>This cookbook follows that suggestion. It has a <code>locale</code> folder under the <code>src/</code>.
Assets within the folder carry a filename extension that matches a language-culture code from a
<a href="https://msdn.microsoft.com/en-us/library/ee825488(v=cs.20).aspx" target="_blank">well-known codeset</a>.</p>
<p>Make a copy of the <code>messages.xlf</code> file, put it in the <code>locale</code> folder and
rename it <code>messages.es.xlf</code>for the Spanish language translation.
Do the same for each target language.</p>
<a id="translate-text-nodes"></a><h3 id="translate-text-nodes">Translate text nodes</h3>
<p>In the real world, you send the <code>messages.es.xlf</code> file to a Spanish translator who fills in the translations
using one of the
<a href="https://en.wikipedia.org/wiki/XLIFF#Editors" target="_blank">many XLIFF file editors</a>.</p>
<p>在现实世界中，<code>messages.es.xlf</code>文件会被发给西班牙语翻译，他们使用<a href="https://en.wikipedia.org/wiki/XLIFF#Editors" target="_blank">这些XLIFF文件编辑器</a>中的一种来翻译它。</p>
<p>This sample file is easy to translate without a special editor or knowledge of Spanish.
Open <code>messages.es.xlf</code> and find the first <code>&lt;trans-unit&gt;</code> section:</p>
<p>我们不需要任何编辑器或者西班牙语知识就可以轻易的翻译本例子文件。
打开<code>messages.es.xlf</code>并找到<code>&lt;trans-unit&gt;</code>节点：</p>
<div class="code-example"><header><h4>src/locale/messages.es.xlf (&lt;trans-unit&gt;)</h4></header><code-example language="html" format="">&lt;trans-unit id=&quot;af2ccf4b5dba59616e92cf1531505af02da8f6d2&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt;Hello i18n!&lt;/source&gt;
  &lt;target&gt;¡Hola i18n!&lt;/target&gt;
  &lt;note priority=&quot;1&quot; from=&quot;description&quot;&gt;An introduction header for this sample&lt;/note&gt;
  &lt;note priority=&quot;1&quot; from=&quot;meaning&quot;&gt;User welcome&lt;/note&gt;
&lt;/trans-unit&gt;
</code-example></div><p>This XML element represents the translation of the <code>&lt;h1&gt;</code> greeting tag you marked with the <code>i18n</code> attribute. </p>
<p>这个XML元素代表了你使用<code>i18n</code>属性标记的<code>&lt;h1&gt;</code>问候语标签的翻译。</p>
<p>Using the <em>source</em>, <em>description</em>, and <em>meaning</em> elements to guide your translation,
replace the <code>&lt;target/&gt;</code> tag with the Spanish greeting:</p>
<p>翻译中利用<em>source</em>、<em>description</em>和<em>meaning</em>元素的信息，替换<code>&lt;target/&gt;</code>标签为西班牙语问候语：</p>
<div class="code-example"><header><h4>src/locale/messages.es.xlf (&lt;trans-unit&gt;, after translation)</h4></header><code-example language="html" format="">&lt;trans-unit id=&quot;af2ccf4b5dba59616e92cf1531505af02da8f6d2&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt;Hello i18n!&lt;/source&gt;
  &lt;target&gt;¡Hola i18n!&lt;/target&gt;
  &lt;note priority=&quot;1&quot; from=&quot;description&quot;&gt;An introduction header for this sample&lt;/note&gt;
  &lt;note priority=&quot;1&quot; from=&quot;meaning&quot;&gt;User welcome&lt;/note&gt;
&lt;/trans-unit&gt;
</code-example></div><div class="alert is-important"><p>Note that the tool generates the <code>id</code>. <strong>Don&#39;t touch it.</strong>
Its value depends on the content of the message and its assigned meaning.
Change either factor and the <code>id</code> changes as well.</p>
<p>注意<code>id</code>是工具生成的。不要修改它。
它的值取决于两个因素：信息的内容和其指定的含义。
改变任何一个因素，<code>id</code>就会改变。</p>
<p>See the <strong><a href="#maintenance">translation file maintenance discussion</a></strong>.</p>
</div><p>Translate the other text nodes the same way:</p>
<div class="code-example"><header><h4>src/locale/messages.es.xlf (&lt;trans-unit&gt;)</h4></header><code-example language="html" format="">&lt;trans-unit id=&quot;ba0cc104d3d69bf669f97b8d96a4c5d8d9559aa3&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt;I don&amp;apos;t output any element&lt;/source&gt;
  &lt;target&gt;No genero ningún elemento&lt;/target&gt;
&lt;/trans-unit&gt;
&lt;trans-unit id=&quot;df3cf8b55cb528cf8c00167e0b119bfb828538b5&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt;I don&amp;apos;t output any element either&lt;/source&gt;
  &lt;target&gt;Yo tampoco genero ningún elemento&lt;/target&gt;
  &lt;note priority=&quot;1&quot; from=&quot;description&quot;&gt;optional description&lt;/note&gt;
  &lt;note priority=&quot;1&quot; from=&quot;meaning&quot;&gt;optional meaning&lt;/note&gt;
&lt;/trans-unit&gt;
&lt;trans-unit id=&quot;701174153757adf13e7c24a248c8a873ac9f5193&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt;Angular logo&lt;/source&gt;
  &lt;target&gt;Logo de Angular&lt;/target&gt;
&lt;/trans-unit&gt;
</code-example></div><a id="translate-plural-select"></a><h2 id="translate-_plural_-and-_select_">Translate <em>plural</em> and <em>select</em></h2>
<p>Translating <em>plural</em> and <em>select</em> messages is a little tricky.</p>
<p>The <code>&lt;source&gt;</code> tag is empty for <code>plural</code> and <code>select</code> translation
units, which makes them hard to correlate with the original template.
The <code>XLIFF</code> format doesn&#39;t yet support the ICU rules.
However, the <code>XMB</code> format does support the ICU rules.</p>
<p>You&#39;ll just have to look for them in relation to other translation units that you recognize from elsewhere in the source template.
In this example, you know the translation unit for the <code>select</code> must be just below the translation unit for the logo.</p>
<a id="translate-plural"></a><h3 id="translate-_plural_">Translate <em>plural</em></h3>
<p>To translate a <code>plural</code>, translate its ICU format match values:</p>
<div class="code-example"><header><h4>src/locale/messages.es.xlf (&lt;trans-unit&gt;)</h4></header><code-example language="html" format="">&lt;trans-unit id=&quot;6e22e74e8cbd3095560cfe08993c4fdfa3c50eb0&quot; datatype=&quot;html&quot;&gt;
  &lt;source/&gt;
  &lt;target&gt;{wolves, plural, =0 {ningún lobo} =1 {un lobo} =2 {dos lobos} other {una horda de lobos}}&lt;/target&gt;
&lt;/trans-unit&gt;
</code-example></div><a id="translate-select"></a><h3 id="translate-_select_">Translate <em>select</em></h3>
<p>The <code>select</code> behaves a little differently. Here again is the ICU format message in the component template:</p>
<div class="code-example"><header><h4>src/app/app.component.html</h4></header><code-example language="html" format="">&lt;span i18n&gt;The hero is {gender, select, m {male} f {female}}&lt;/span&gt;
</code-example></div><p>The extraction tool broke that into <em>two</em> translation units.</p>
<p>The first unit contains the text that was <em>outside</em> the <code>select</code>.
In place of the <code>select</code> is a placeholder, <code>&lt;x id=&quot;ICU&quot;&gt;</code>, that represents the <code>select</code> message.
Translate the text and leave the placeholder where it is.</p>
<div class="code-example"><header><h4>src/locale/messages.es.xlf (&lt;trans-unit&gt;)</h4></header><code-example language="html" format="">&lt;trans-unit id=&quot;61cafedb85466ab789b3ae817bba1a545468ee1c&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt;The hero is &lt;x id=&quot;ICU&quot;/&gt;&lt;/source&gt;
  &lt;target&gt;El heroe es &lt;x id=&quot;ICU&quot;/&gt;&lt;/target&gt;
&lt;/trans-unit&gt;
</code-example></div><p>The second translation unit, immediately below the first one, contains the <code>select</code> message. Translate that.</p>
<div class="code-example"><header><h4>src/locale/messages.es.xlf (&lt;trans-unit&gt;)</h4></header><code-example language="html" format="">&lt;trans-unit id=&quot;14c7055d67771a3b7b6888d282ac092896be06b6&quot; datatype=&quot;html&quot;&gt;
  &lt;source/&gt;
  &lt;target&gt;{gender, select, m {hombre} f {mujer}}&lt;/target&gt;
&lt;/trans-unit&gt;
</code-example></div><p>Here they are together, after translation:</p>
<div class="code-example"><header><h4>src/locale/messages.es.xlf (&lt;trans-unit&gt;)</h4></header><code-example language="html" format="">      &lt;trans-unit id=&quot;61cafedb85466ab789b3ae817bba1a545468ee1c&quot; datatype=&quot;html&quot;&gt;
        &lt;source&gt;The hero is &lt;x id=&quot;ICU&quot;/&gt;&lt;/source&gt;
        &lt;target&gt;El heroe es &lt;x id=&quot;ICU&quot;/&gt;&lt;/target&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id=&quot;14c7055d67771a3b7b6888d282ac092896be06b6&quot; datatype=&quot;html&quot;&gt;
        &lt;source/&gt;
        &lt;target&gt;{gender, select, m {hombre} f {mujer}}&lt;/target&gt;
      &lt;/trans-unit&gt;
</code-example></div><div class="l-main-content"></div><p>The entire template translation is complete. It&#39;s
time to incorporate that translation into the application.</p>
<div id="app-pre-translation"></div><h3 id="the-app-before-translation">The app before translation</h3>
<h3 id="-">翻译前的应用程序</h3>
<p>When the previous steps finish, the sample app <em>and</em> its translation file are as follows:</p>
<p>如下所示，是完成前面的步骤后的例子应用<strong>和</strong>它的翻译文件：</p>
<code-tabs><code-pane language="html" name="src/app/app.component.html" format="linenums">&lt;h1 i18n=&quot;User welcome|An introduction header for this sample&quot;&gt;Hello i18n!&lt;/h1&gt;

&lt;ng-container i18n&gt;I don&#39;t output any element&lt;/ng-container&gt;

&lt;br /&gt;

&lt;!--i18n: optional meaning|optional description --&gt;
I don&#39;t output any element either
&lt;!--/i18n--&gt;

&lt;br /&gt;

&lt;img [src]=&quot;logo&quot; i18n-title title=&quot;Angular logo&quot; /&gt;
&lt;br&gt;
&lt;button (click)=&quot;inc(1)&quot;&gt;+&lt;/button&gt; &lt;button (click)=&quot;inc(-1)&quot;&gt;-&lt;/button&gt;
&lt;span i18n&gt;{wolves, plural, =0 {no wolves} =1 {one wolf} =2 {two wolves} other {a wolf pack}}&lt;/span&gt;
({{wolves}})
&lt;br&gt;&lt;br&gt;
&lt;button (click)=&quot;male()&quot;&gt;&amp;#9794;&lt;/button&gt; &lt;button (click)=&quot;female()&quot;&gt;&amp;#9792;&lt;/button&gt;
&lt;span i18n&gt;The hero is {gender, select, m {male} f {female}}&lt;/span&gt;
&lt;br&gt;
</code-pane><code-pane language="ts" name="src/app/app.component.ts" format="linenums">import { Component } from &#39;@angular/core&#39;;

@Component({
  selector: &#39;my-app&#39;,
  templateUrl: &#39;./app.component.html&#39;
})
export class AppComponent {
  wolves = 0;
  gender = &#39;f&#39;;
  fly = true;
  logo = &#39;https://angular.io/resources/images/logos/angular/angular.png&#39;;
  inc(i: number) {
    this.wolves = Math.min(5, Math.max(0, this.wolves + i));
  }
  male()   { this.gender = &#39;m&#39;; }
  female() { this.gender = &#39;f&#39;; }
}
</code-pane><code-pane language="ts" name="src/app/app.module.ts" format="linenums">import { NgModule }      from &#39;@angular/core&#39;;
import { BrowserModule } from &#39;@angular/platform-browser&#39;;

import { AppComponent }  from &#39;./app.component&#39;;

@NgModule({
  imports:      [ BrowserModule ],
  declarations: [ AppComponent ],
  bootstrap:    [ AppComponent ]
})

export class AppModule { }
</code-pane><code-pane language="ts" name="src/main.ts" format="linenums">import { platformBrowserDynamic } from &#39;@angular/platform-browser-dynamic&#39;;

import { AppModule } from &#39;./app/app.module&#39;;

platformBrowserDynamic().bootstrapModule(AppModule);
</code-pane><code-pane language="html
" name="src/locale/messages.es.xlf" format="linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;xliff version=&quot;1.2&quot; xmlns=&quot;urn:oasis:names:tc:xliff:document:1.2&quot;&gt;
  &lt;file source-language=&quot;en&quot; datatype=&quot;plaintext&quot; original=&quot;ng2.template&quot;&gt;
    &lt;body&gt;
      &lt;trans-unit id=&quot;af2ccf4b5dba59616e92cf1531505af02da8f6d2&quot; datatype=&quot;html&quot;&gt;
        &lt;source&gt;Hello i18n!&lt;/source&gt;
        &lt;target&gt;¡Hola i18n!&lt;/target&gt;
        &lt;note priority=&quot;1&quot; from=&quot;description&quot;&gt;An introduction header for this sample&lt;/note&gt;
        &lt;note priority=&quot;1&quot; from=&quot;meaning&quot;&gt;User welcome&lt;/note&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id=&quot;ba0cc104d3d69bf669f97b8d96a4c5d8d9559aa3&quot; datatype=&quot;html&quot;&gt;
        &lt;source&gt;I don&amp;apos;t output any element&lt;/source&gt;
        &lt;target&gt;No genero ningún elemento&lt;/target&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id=&quot;df3cf8b55cb528cf8c00167e0b119bfb828538b5&quot; datatype=&quot;html&quot;&gt;
        &lt;source&gt;I don&amp;apos;t output any element either&lt;/source&gt;
        &lt;target&gt;Yo tampoco genero ningún elemento&lt;/target&gt;
        &lt;note priority=&quot;1&quot; from=&quot;description&quot;&gt;optional description&lt;/note&gt;
        &lt;note priority=&quot;1&quot; from=&quot;meaning&quot;&gt;optional meaning&lt;/note&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id=&quot;701174153757adf13e7c24a248c8a873ac9f5193&quot; datatype=&quot;html&quot;&gt;
        &lt;source&gt;Angular logo&lt;/source&gt;
        &lt;target&gt;Logo de Angular&lt;/target&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id=&quot;6e22e74e8cbd3095560cfe08993c4fdfa3c50eb0&quot; datatype=&quot;html&quot;&gt;
        &lt;source/&gt;
        &lt;target&gt;{wolves, plural, =0 {ningún lobo} =1 {un lobo} =2 {dos lobos} other {una horda de lobos}}&lt;/target&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id=&quot;61cafedb85466ab789b3ae817bba1a545468ee1c&quot; datatype=&quot;html&quot;&gt;
        &lt;source&gt;The hero is &lt;x id=&quot;ICU&quot;/&gt;&lt;/source&gt;
        &lt;target&gt;El heroe es &lt;x id=&quot;ICU&quot;/&gt;&lt;/target&gt;
      &lt;/trans-unit&gt;
      &lt;trans-unit id=&quot;14c7055d67771a3b7b6888d282ac092896be06b6&quot; datatype=&quot;html&quot;&gt;
        &lt;source/&gt;
        &lt;target&gt;{gender, select, m {hombre} f {mujer}}&lt;/target&gt;
      &lt;/trans-unit&gt;
    &lt;/body&gt;
  &lt;/file&gt;
&lt;/xliff&gt;
</code-pane></code-tabs><a id="merge"></a><div class="l-main-section"></div><h2 id="merge-the-completed-translation-file-into-the-app">Merge the completed translation file into the app</h2>
<h2 id="-">合并已经翻译的文件</h2>
<p>To merge the translated text into component templates,
compile the application with the completed translation file.
The process is the same whether the file is in <code>.xlf</code> format or 
in another format  that Angular understands, such as <code>.xlif</code> or <code>.xtb</code>.</p>
<p>要合并已经翻译的文件到组件模板，使用翻译过的文件编译应用。
不管文件是<code>.xlf</code>格式还是其他Angular接受的格式（<code>.xlif</code>和<code>.xtb</code>），流程是一样的。</p>
<p>You provide the Angular compiler with three new pieces of information:</p>
<p>你要为Angular编译器提供下列三种新信息：</p>
<ul>
<li><p>The translation file.</p>
<p>翻译文件</p>
</li>
<li><p>The translation file format.</p>
<p>翻译文件的格式</p>
</li>
<li><p>The   <a href="https://en.wikipedia.org/wiki/XLIFF" target="_blank"><em>Locale ID</em></a>
(<code>es</code> or <code>en-US</code> for instance).</p>
<p>目标<a href="https://en.wikipedia.org/wiki/XLIFF" target="_blank"><em>语言环境ID</em></a></p>
<pre><code>(例如`es`或`en-US`)
</code></pre></li>
</ul>
<p><em>How</em> you provide this information depends upon whether you compile with
the JIT (<em>Just-in-Time</em>) compiler or the AOT (<em>Ahead-of-Time</em>) compiler. </p>
<p>你如何提供这些信息取决于你使用的是JiT（即时）编译器还是AoT（预先）编译器。</p>
<ul>
<li><p>With <a href="#jit">JIT</a>, you provide the information at bootstrap time.</p>
<p>使用<a href="#jit">JiT</a>时，在引导时提供</p>
</li>
<li><p>With <a href="#aot">AOT</a>, you pass the information as <code>ngc</code> options.</p>
<p>使用<a href="#aot">AoT</a>时，在<code>ngc</code>命令的选项里提供</p>
</li>
</ul>
<a id="jit"></a><div class="l-main-section"></div><h3 id="merge-with-the-jit-compiler">Merge with the JIT compiler</h3>
<h3 id="-jit-">用JiT编译器合并</h3>
<p>The JIT compiler compiles the application in the browser as the application loads.
Translation with the JIT compiler is a dynamic process of:</p>
<p>JiT（即时）编译器在应用程序加载时，在浏览器中编译应用。
在使用JiT编译器的环境中翻译是一个动态的流程，包括：</p>
<ol>
<li><p>Determining the language version for the current user。</p>
<p> 决定当前用户的语言，</p>
</li>
<li><p>Importing the appropriate language translation file as a string constant.</p>
<p> 导入合适的语言翻译文件到一个字符串常量，</p>
</li>
<li><p>Creating corresponding translation providers to guide the JiT compiler.</p>
<p> 新建对应的翻译提供商来指导JiT编译器，</p>
</li>
<li><p>Bootstrapping the application with those providers.</p>
<p> 使用这些提供商来启动应用。</p>
</li>
</ol>
<p>Open <code>index.html</code> and revise the launch script as follows:</p>
<p>打开<code>index.html</code>并这样修改加载脚本：</p>
<div class="code-example"><header><h4>index.html (launch script)</h4></header><code-example language="html" format="">&lt;script&gt;
  // Get the locale id somehow
  document.locale = &#39;es&#39;;

  // Map to the text plugin
  System.config({
    map: {
      text: &#39;systemjs-text-plugin.js&#39;
    }
  });

  // Launch the app
  System.import(&#39;main.js&#39;).catch(function(err){ console.error(err); });
&lt;/script&gt;
</code-example></div><p>In this sample, the user&#39;s language is hardcoded as a global <code>document.locale</code> variable
in the <code>index.html</code>.</p>
<p>在本例中，用户的语言在<code>index.html</code>中被硬编码到一个全局的<code>document.locale</code>变量中。</p>
<a id="text-plugin"></a><h3 id="systemjs-text-plugin">SystemJS text plugin</h3>
<h3 id="systemjs-">SystemJS文本插件</h3>
<p>Notice the SystemJS mapping of <code>text</code> to a <code>systemjs-text-plugin.js</code>.
With the help of a text plugin, SystemJS can read any file as raw text and
return the contents as a string.
You&#39;ll need it to import the language translation file.</p>
<p>注意SystemJS将<code>text</code>映射为<code>systemjs-text-plug.js</code>。
在这个文本插件的帮助下，SystemJS可以读取任何原始文件并将其内容作为字符串返回。
你需要使用它来导入语言翻译文件。</p>
<p>SystemJS doesn&#39;t ship with a raw text plugin but it&#39;s easy to add.
Create the following <code>systemjs-text-plugin.js</code> in the <code>src/</code> folder:</p>
<p>SystemJS没有自带原始文本插件，但是我们很容易添加它。
在<code>src/</code>目录新建下面的<code>systemjs-text-plugin.js</code>文件：</p>
<div class="code-example"><header><h4>src/systemjs-text-plugin.js</h4></header><code-example language="js" format="">/*
  SystemJS Text plugin from
  https://github.com/systemjs/plugin-text/blob/master/text.js
*/
exports.translate = function(load) {
  if (this.builder &amp;&amp; this.transpiler) {
    load.metadata.format = &#39;esm&#39;;
    return &#39;exp&#39; + &#39;ort var __useDefault = true; exp&#39; + &#39;ort default &#39; + JSON.stringify(load.source) + &#39;;&#39;;
  }

  load.metadata.format = &#39;amd&#39;;
  return &#39;def&#39; + &#39;ine(function() {\nreturn &#39; + JSON.stringify(load.source) + &#39;;\n});&#39;;
}
</code-example></div><a id="create-translation-providers"></a><h3 id="create-translation-providers">Create translation providers</h3>
<h3 id="-">新建翻译提供商</h3>
<p>Three providers tell the JIT compiler how to translate the template texts for a particular language
while compiling the application:</p>
<p>三种提供商帮助JiT编译在编译应用时，将模板文本翻译到某种语言：</p>
<ul>
<li><p><code>TRANSLATIONS</code> is a string containing the content of the translation file.</p>
<p>  <code>TRANSLATIONS</code>是含有翻译文件内容的字符串。</p>
</li>
<li><p><code>TRANSLATIONS_FORMAT</code> is the format of the file: <code>xlf</code>, <code>xlif</code>, or <code>xtb</code>.</p>
<p>  <code>TRANSLATIONS_FORMAT</code>是文件的格式: <code>xlf</code>、<code>xlif</code>或<code>xtb</code>。</p>
</li>
<li><p><code>LOCALE_ID</code> is the locale of the target language.</p>
<p><code>LOCALE_ID</code>是目标语言的语言环境。</p>
</li>
</ul>
<p>The <code>getTranslationProviders()</code> function in the following <code>src/app/i18n-providers.ts</code>
creates those providers based on the user&#39;s <em>locale</em>
and the corresponding translation file:</p>
<p>在下面的<code>src/app/i18n-providers.ts</code>文件的<code>getTranslationProviders()</code>函数中，根据用户的<strong>语言环境</strong>和对应的翻译文件构建这些提供商：</p>
<div class="code-example"><header><h4>src/app/i18n-providers.ts</h4></header><code-example language="ts" format="linenums">import { TRANSLATIONS, TRANSLATIONS_FORMAT, LOCALE_ID } from &#39;@angular/core&#39;;

export function getTranslationProviders(): Promise&lt;Object[]&gt; {

  // Get the locale id from the global
  const locale = document[&#39;locale&#39;] as string;

  // return no providers if fail to get translation file for locale
  const noProviders: Object[] = [];

  // No locale or U.S. English: no translation providers
  if (!locale || locale === &#39;en-US&#39;) {
    return Promise.resolve(noProviders);
  }

  // Ex: &#39;locale/messages.es.xlf`
  const translationFile = `./locale/messages.${locale}.xlf`;

  return getTranslationsWithSystemJs(translationFile)
    .then( (translations: string ) =&gt; [
      { provide: TRANSLATIONS, useValue: translations },
      { provide: TRANSLATIONS_FORMAT, useValue: &#39;xlf&#39; },
      { provide: LOCALE_ID, useValue: locale }
    ])
    .catch(() =&gt; noProviders); // ignore if file not found
}

declare var System: any;

function getTranslationsWithSystemJs(file: string) {
  return System.import(file + &#39;!text&#39;); // relies on text plugin
}
</code-example></div><ol>
<li><p>It gets the locale from the global <code>document.locale</code> variable that was set in <code>index.html</code>.</p>
<p> 它从在<code>index.html</code>中设置的全局<code>document.locale</code>变量中获取语言环境。</p>
</li>
<li><p>If there is no locale or the language is U.S. English (<code>en-US</code>), there is no need to translate.
The function returns an empty <code>noProviders</code> array as a <code>Promise</code>.
It must return a <code>Promise</code> because this function could read a translation file asynchronously from the server.</p>
<p> 如果没有语言环境或者语言是美国英语（<code>en-US</code>），则就无需翻译。该函数以<code>Promise</code>的形式返回一个空的<code>noProviders</code>数组。它必须要返回<code>Promise</code>，因为这个函数可能异步从服务器读取翻译文件。</p>
</li>
<li><p>It creates a transaction filename from the locale according to the name and location convention
<a href="#localization-folder">described earlier</a>.</p>
<p> 根据<a href="#localization-folder">上面描述</a>的名字和本土化的约定，它根据语言环境创建一个合约文件名。</p>
</li>
<li><p>The <code>getTranslationsWithSystemJs()</code> method reads the translation and returns the contents as a string.
Notice that it appends <code>!text</code> to the filename, telling SystemJS to use the <a href="#text-plugin">text plugin</a>.</p>
<p> <code>getTranslationsWithSystemJs()</code>方法读取翻译并以字符串的形式返回其内容。
注意它在文件名上附加<code>!text</code>，告诉SystemJS使用<a href="#text-plugin">文本插件</a>。</p>
</li>
<li><p>The callback composes a providers array with the three translation providers.</p>
<p>回调函数使用这三种翻译提供商创建一个提供商数组。</p>
</li>
<li><p>Finally, <code>getTranslationProviders()</code> returns the entire effort as a promise.</p>
<p>最后，<code>getTranslationProviders()</code>返回以承诺的形式返回全部流程的结果。</p>
</li>
</ol>
<a id="bootstrap-the-app"></a><h3 id="bootstrap-the-app-with-translation-providers">Bootstrap the app with translation providers</h3>
<h3 id="-">使用翻译提供商引导应用</h3>
<p>The Angular <code>bootstrapModule()</code> method has a second <em>options</em> parameter
that can influence the behavior of the compiler.</p>
<p>Angular的<code>bootstrapModule()</code>方法接受<strong>可选的</strong>第二参数，它可以影响编译器的行为。</p>
<p>You&#39;ll create an <em>options</em> object with the translation providers from <code>getTranslationProviders()</code>
and pass it to <code>bootstrapModule</code>.
Open the <code>src/main.ts</code> and modify the bootstrap code as follows:</p>
<p>从<code>getTranslationProviders()</code>返回的翻译提供商创建<em>options</em>对象，并将其传给<code>bootstrapModule</code>。
打开<code>src/main.ts</code>并这样修改引导代码：</p>
<div class="code-example"><header><h4>src/main.ts</h4></header><code-example language="ts" format="">import { platformBrowserDynamic }  from &#39;@angular/platform-browser-dynamic&#39;;
import { getTranslationProviders } from &#39;./app/i18n-providers&#39;;

import { AppModule } from &#39;./app/app.module&#39;;

getTranslationProviders().then(providers =&gt; {
  const options = { providers };
  platformBrowserDynamic().bootstrapModule(AppModule, options);
});
</code-example></div><p>Notice that it waits for the <code>getTranslationProviders()</code> promise to resolve before
bootstrapping the app.</p>
<p>注意，它等待<code>getTranslationProviders()</code>承诺的解析完成后，才引导应用。</p>
<p>The app is now <em>internationalized</em> for English and Spanish and there is a clear path for adding
more languages.</p>
<p>现在，应用已经被国际化为英语版和西班牙语版，而且我们有了清晰的添加更多语言的方法。</p>
<a id="aot"></a><div class="l-main-section"></div><h3 id="_internationalization_-with-the-aot-compiler"><em>Internationalization</em> with the AOT compiler</h3>
<h3 id="-aot-">使用AoT编译器时的国际化</h3>
<p>The JIT compiler translates the application into the target language
while compiling dynamically in the browser.
That&#39;s flexible but may not be fast enough for your users.</p>
<p>JiT编译器在浏览器中动态编译应用时，将其翻译到目标语言。
这样很灵活，但是对用户来讲，可能速度太慢。 </p>
<p>The AOT (<em>Ahead-of-Time</em>) compiler is part of a build process that
produces a small, fast, ready-to-run application package.
When you internationalize with the AOT compiler, you pre-build
a separate application package for each
language. Then in the host web page, in this case <code>index.html</code>,
you determine which language the user needs
and serve the appropriate application package.</p>
<p>AoT（预先）编译器是一种构建流程，出产尺寸小、速度快和可执行的应用程序包。
在使用Aot编译器的环境中国际化，你为每种语言预先构建一个单独的应用程序包。然后，在宿主网络页面（<code>index.html</code>）中，你再决定用户需要哪种语言，并选择合适的应用程序包。</p>
<p>This cookbook doesn&#39;t cover how to build multiple application packages and
serve them according to the user&#39;s language preference.
It does explain the few steps necessary to tell the AOT compiler to apply a translations file.</p>
<p>本烹饪书不介绍如何构建多种应用程序包和如何根据用户的语言设置推送它们。
它介绍了一些必要的步骤，来告诉AoT采用翻译文件。</p>
<p>Internationalization with the AOT compiler requires
some setup specifically for AOT compilation.
Start with the application project as shown
<a href="#app-pre-translation">just before merging the translation file</a>
and refer to the <a href="aot-compiler.html">AOT cookbook</a> to make it <em>AOT-ready</em>.</p>
<p>使用AoT编译器时的国际化，需要一些针对AoT的设置。
以<a href="#app-pre-translation">合并翻译文件之前</a>的应用项目开始，并参见<a href="aot-compiler.html">AoT烹饪书</a>，把它变成与AoT兼容的项目。</p>
<p>Next, issue an <code>ngc</code> compile command for each supported language, including English.
The result is a separate version of the application for each language.</p>
<p>接下来，为每种支持的语言（包括英语）运行一次<code>ngc</code>编译命令。
结果是每种语言都有自己单独的应用版本。</p>
<p>Tell AOT how to translate by adding three options to the <code>ngc</code> command:</p>
<p>通过添加下面三种选项到<code>ngc</code>命令来告诉AoT编译器如何翻译：</p>
<ul>
<li><p><code>--i18nFile</code>: the path to the translation file.</p>
<p><code>--i18nFile</code>: 翻译文件的路径</p>
</li>
<li><p><code>--locale</code>: the name of the locale.</p>
<p><code>--locale</code>: 语言环境的名字</p>
</li>
<li><p><code>--i18nFormat</code>: the format of the localization file.</p>
<p><code>--i18nFormat</code>: 翻译文件的格式</p>
</li>
</ul>
<p>For this sample, the Spanish language command would be:</p>
<p>本西班牙语例子的命令为：</p>
<code-example language="sh" class="code-shell">./node_modules/.bin/ngc --i18nFile=./locale/messages.es.xlf --locale=es --i18nFormat=xlf
</code-example><div class="l-sub-section"><p>Windows users may have to quote the command:</p>
<p>Windows用户可能需要双引号这个命令：</p>
<code-example language="sh" class="code-shell">"./node_modules/.bin/ngc" --i18nFile=./locale/messages.es.xlf --locale=es --i18nFormat=xlf
</code-example></div><a id="maintenance"></a><h2 id="translation-file-maintenance-and-_id_-changes">Translation file maintenance and <em>id</em> changes</h2>
<p>As the application evolves, you will change the <em>i18n</em> markup
and re-run the <code>ng-xi18n</code> extraction tool many times.
The <em>new</em> markup that you add is not a problem;
but <em>most</em> changes to existing markup trigger
generation of new <code>id</code>s for the affected translation units.</p>
<p>After an <code>id</code> changes, the translation files are no longer in sync.
<strong>All translated versions of the application will fail</strong> during re-compilation.
The error messages identify the old <code>id</code>s that are no longer valid but
they don&#39;t tell you what the new <code>id</code>s should be.</p>
<p><strong>Commit all translation message files to source control</strong>,
especially the English source <code>messages.xlf</code>.
The difference between the old and the new <code>messages.xlf</code> file
 help you find and update <code>id</code> changes across your translation files.</p></article><div data-swiftype-index="false" class="main-footer"><nav class="background-midnight grid-fluid"><div class="c3 main-footer-branding"><div class="logo-inverse-large"></div></div><div class="c2"><h3 class="text-headline">RESOURCES</h3><h3 class="text-headline">资源库</h3><ul class="text-body"><!-- TODO: (ericjim) make a libraries page to showcase all angular libraries--><!--li <a href="/libraries.html">Libraries</a>--><li><p><a href="/about/">About</a></p><p><a href="/about/">关于</a></p></li><li><p><a href="/resources/#Education">Books & Training</a></p><p><a href="/resources/#Education">书籍与培训</a></p></li><li><p><a href="/resources/">Tools & Libraries</a></p><p><a href="/resources/">工具与库</a></p></li><li><p><a href="/resources/">Community</a></p><p><a href="/resources/">社区</a></p></li><li><p><a href="/presskit.html">Press Kit</a></p><p><a href="/presskit.html">宣传资料</a></p></li></ul></div><div class="c2"><h3 class="text-headline">HELP</h3><h3 class="text-headline">帮助</h3><ul class="text-body"><li><a href="http://stackoverflow.com/questions/tagged/angular2">Stack Overflow</a></li><li><a href="https://gitter.im/angular/angular">Gitter</a></li><li><a href="https://groups.google.com/forum/#!forum/angular"> Google Group</a></li><li><p><a href="https://github.com/angular/angular/issues"> Report Issues</a></p><p><a href="https://github.com/angular/angular/issues"> 报告问题</a></p></li><li><p><a class="footer-feedback" ng-click="appCtrl.openFeedback()" aria-label="Submit feedback on this page"> Site Feedback</a></p><p><a class="footer-feedback" ng-click="appCtrl.openFeedback()" aria-label="Submit feedback on this page"> 网站反馈</a></p></li></ul></div><div class="c2"><h3 class="text-headline">COMMUNITY</h3><h3 class="text-headline">社区</h3><ul class="text-body"><li><p><a href="/events.html">Events</a></p><p><a href="/events.html">会议</a></p></li><li><a href="http://www.meetup.com/topics/angularjs/">Meetups</a></li><li><a href="https://twitter.com/angular"> Twitter</a></li><li><a href="https://github.com/angular/angular"> GitHub</a></li><li><p><a href="/contribute.html"> Contribute</a></p><p><a href="/contribute.html"> 做贡献</a></p></li></ul></div><div class="c2"><h3 class="text-headline">LANGUAGES</h3><h3 class="text-headline">其它语种</h3><ul class="text-body"><li><a href="https://angular.io/">英文版</a></li></ul></div></nav><footer class="background-midnight"><small class="text-caption">Powered by Google ©2010-2017。代码授权方式：<a href="/license">MIT-style License</a>。文档授权方式：<a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>。</small><a aria-label="查看风格指南" href="/docs/ts/latest/styleguide.html" title="风格指南" md-button="md-button" class="styleguide-trigger text-snow translated-cn"><span class="icon-favorite"></span></a><p><small class="text-caption">本网站由洛阳永欣维护 &nbsp;<a href="http://www.miitbeian.gov.cn/">豫ICP备16019859号-1</a></small></p></footer></div><!-- VENDORS --><script src="/resources/js/vendor/prettify.js"></script><script src="/resources/js/vendor/lang-basic.js"></script><script src="/resources/js/vendor/lang-dart.js"></script><script src="/resources/js/vendor/lodash.js"></script><script src="/resources/js/vendor/clipboard.min.js"></script><!-- Angular Material Dependencies --><script src="/resources/js/vendor/angular.min.js"></script><script src="/resources/js/vendor/angular-animate.min.js"></script><script src="/resources/js/vendor/angular-aria.min.js"></script><script src="/resources/js/vendor/angular-material.min.js"></script><!-- Firebase -->
<script src="/resources/js/vendor/firebase.js"></script>
<!-- AngularFire -->
<script src="/resources/js/vendor/angularfire.min.js"></script>
<!-- Angular.io Site JS --><script src="/translate/cn/translate.js"></script><script src="/resources/js/site.js"></script><script src="/resources/js/util.js"></script><script src="/resources/js/controllers/app-controller.js"></script><script src="/resources/js/controllers/resources-controller.js"></script><script src="/resources/js/directives/cheatsheet.js"></script><script src="/resources/js/directives/api-list.js"></script><script src="/resources/js/directives/bio.js"></script><script src="/resources/js/directives/bold.js"></script><script src="/resources/js/directives/announcement-bar.js"></script><script src="/resources/js/directives/code.js"></script><script src="/resources/js/directives/copy.js"></script><script src="/resources/js/directives/code-tabs.js"></script><script src="/resources/js/directives/code-pane.js"></script><script src="/resources/js/directives/code-example.js"></script><script src="/resources/js/directives/if-docs.js"></script><script src="/resources/js/directives/live-example.js"></script><script src="/resources/js/directives/scroll-y-offset-element.js"></script><!-- GA --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-80456300-1', 'auto');
ga('send', 'pageview')
</script><!-- SWIFTYPE --><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','VsuU7kH5Hnnj9tfyNvfK','2.0.0');</script></body></html>